<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Aspose.Imaging for Java 20.11 - Release notes | Remove background, making gifs</title><meta name=description content="Aspose.Imaging for Java 20.11 - Release notes | Remove background, making gifs – the latest updates and fixes."><meta name=viewport content="width=device-width,minimum-scale=1"><link rel=canonical href=https://releases-qa.aspose.com/imaging/java/release-notes/2020/aspose-imaging-for-java-20-11-release-notes/><link rel=alternate hreflang=x-default href=https://releases-qa.aspose.com/imaging/java/release-notes/2020/aspose-imaging-for-java-20-11-release-notes/><meta name=robots content="noindex, nofollow"><link rel=apple-touch-icon sizes=180x180 href=/res_repo/apple-touch-icon.png><link rel=icon type=image/png href=/res_repo/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/res_repo/favicon-16x16.png sizes=16x16><link rel=mask-icon href=/res_repo/safari-pinned-tab.svg color=#0594cb><meta name=theme-color content="#ffffff"><meta property="og:title" content="Aspose.Imaging for Java 20.11 - Release notes | Remove background, making gifs "><meta property="og:description" content="Aspose.Imaging for Java 20.11 - Release notes | Remove background, making gifs – the latest updates and fixes."><meta property="og:type" content="article"><meta property="og:url" content="https://releases-qa.aspose.com/imaging/java/release-notes/2020/aspose-imaging-for-java-20-11-release-notes/"><meta itemprop=name content="Aspose.Imaging for Java 20.11 - Release notes | Remove background, making gifs"><meta itemprop=description content="Aspose.Imaging for Java 20.11 - Release notes | Remove background, making gifs – the latest updates and fixes."><meta itemprop=wordCount content="3114"><meta name=twitter:card content="summary"><meta name=twitter:title content="Aspose.Imaging for Java 20.11 - Release notes | Remove background, making gifs"><meta name=twitter:description content="Aspose.Imaging for Java 20.11 - Release notes | Remove background, making gifs – the latest updates and fixes."><link href=/css/bootstrap.css rel=stylesheet type=text/css><script src=https://releases-qa.aspose.com/res_repo/js/jquery-1.10.2.min.js></script></head><body><div id=header></div><div class=downloadpage><div class="container-fluid bcrumb1"><div id=sticky1 class=stickytopheight>&nbsp;</div><div class=container><div class=moduletable><ul id=dvBC class=breadcrumb><li><a href=/>Home</a><span class=divider></span></li><li><a href=/imaging/>Aspose.Imaging Product Family</a><span class=divider></span></li><li><a href=/imaging/java/>Aspose.Imaging for Java</a><span class=divider></span></li><li><a href=/imaging/java/release-notes/>Release Notes</a><span class=divider></span></li><li><a href=/imaging/java/release-notes/2020/>2020</a><span class=divider></span></li><li><a href=/imaging/java/release-notes/2020/aspose-imaging-for-java-20-11-release-notes/>Aspose.Imaging for Java 20.11 - Release notes | Remove background, making gifs</a><span class=divider></span></li></ul></div></div></div><div class="container-fluid content2 vpanel-left"><div class=container><div class=row><div class="col-md-3 vpanel tree-section"><p class=list-title>Browse our Products<button type=button class=treeview-toggle> <span class=sr-only>Toggle navigation</span> <span class="icon expand-icon glyphicon glyphicon-hide"></span></button></p><div id=tree class="treeview hidetree"></div></div><div class="col-md-9 lhs1 col-xs-12 mobilehide node-section"><div class=box1><section role=main class="main-container page-package-details"><div class=row><div class="col-sm-9 package-details-main"><h1><strong>Aspose.Imaging for Java 20.11 - Release notes | Remove background, making gifs</strong></h1><div class="tab-content body-tab-content"><div role=tabpanel class="tab-pane active" id=readme-tab><div class=readme-common><div id=readme-container><p><p><strong>Summary:</strong></p><p>This release contains new features and enhancements:</p><ul><li>Remove background supports improved Graph Cut image segmentation algorithm with precalculated initial background/foreground brushstrokes</li><li>Supported export of the set of single page images to any supported multipage image format (ie GIF, DICOM etc)</li></ul><table><thead><tr><th><strong>Key</strong></th><th><strong>Summary</strong></th><th><strong>Category</strong></th></tr></thead><tbody><tr><td>IMAGINGJAVA-1924</td><td>Improve Remove background : Add initial precalculated background/foreground brushstrokes for GraphCut image segmentation algorithm</td><td>Feature</td></tr><tr><td>IMAGINGJAVA-1900</td><td>Support of making gifs and other multi-page (multi-frame) files from set of images</td><td>Feature</td></tr><tr><td>IMAGINGJAVA-1907</td><td>Enhance EPS fileformat inherinance to support rotate, resize, flip etc operations as vector images support</td><td>Enhancement</td></tr><tr><td>IMAGINGJAVA-1901</td><td>Index was outside the bounds of the array exception when loading DNG</td><td>Enhancement</td></tr><tr><td>IMAGINGJAVA-1895</td><td>Fix color conversion between 16Bpp565, 16Bpp555 and 32BppRgb formats</td><td>Enhancement</td></tr><tr><td>IMAGINGJAVA-1894</td><td>Exception on exporting EMF to PDF</td><td>Enhancement</td></tr><tr><td>IMAGINGJAVA-1893</td><td>SVGZ result image damaged in PDF conversion and other conversions</td><td>Enhancement</td></tr><tr><td>IMAGINGJAVA-1892</td><td>Exception on loading CDR file</td><td>Enhancement</td></tr><tr><td>IMAGINGJAVA-1891</td><td>Wrong processing of SVG image</td><td>Enhancement</td></tr><tr><td>IMAGINGJAVA-1890</td><td>Saving jpg after watermark throwing exception</td><td>Enhancement</td></tr><tr><td>IMAGINGJAVA-1889</td><td>Invalid results of the export from PNG to SVG format</td><td>Enhancement</td></tr><tr><td>IMAGINGJAVA-1873</td><td>ColorPaletteHelper produces incorrect palette for BMP RGB565 images</td><td>Enhancement</td></tr></tbody></table><h2 id=public-api-changes><strong>Public API changes:</strong></h2><p><strong>Added APIs:</strong></p><p>Please see corresponding cumulative <a href=/imaging/net/release-notes/2020/aspose-imaging-for-net-20-11-release-notes/>API changes for Aspose.Imaging for .NET 20.11</a> version</p><p><strong>Removed APIs:</strong></p><p>Please see corresponding cumulative <a href=/imaging/net/release-notes/2020/aspose-imaging-for-net-20-11-release-notes/>API changes for Aspose.Imaging for .NET 20.11</a> version</p><h2 id=usage-examples><strong>Usage Examples:</strong></h2><p><strong>IMAGINGJAVA-1924 Improve Remove background : Add initial precalculated background/foreground brushstrokes for GraphCut image segmentation algorithm</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>###</span> Using Graph Cut auto masking with feathering<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>To get better image masking results<span style=color:#f92672>,</span> Graph Cut segmentation with pre<span style=color:#f92672>-</span>calculated brushstrokes can be used<span style=color:#f92672>.</span> The following example demonstrates saving of the image masking results with feathering based on image size<span style=color:#f92672>.</span> Image masking is performed using auto calculated <span style=color:#66d9ef>default</span> strokes<span style=color:#f92672>.</span> The Args property of AutoMaskingGraphCutOptions can be omitted since <span style=color:#66d9ef>default</span> strokes are placed there in the end<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MaskingResult<span style=color:#f92672>[]</span> results<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;input.jpg&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// To use Graph Cut with auto calculated strokes, AutoMaskingGraphCutOptions is used.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    AutoMaskingGraphCutOptions options <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AutoMaskingGraphCutOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Indicating that a new calculation of the default strokes should be performed during the image decomposition.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setCalculateDefaultStrokes</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Setting post-process feathering radius based on the image size.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setFeatheringRadius</span><span style=color:#f92672>((</span>Math<span style=color:#f92672>.</span><span style=color:#a6e22e>max</span><span style=color:#f92672>(</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getWidth</span><span style=color:#f92672>(),</span> image<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeight</span><span style=color:#f92672>())</span> <span style=color:#f92672>/</span> 500<span style=color:#f92672>)</span> <span style=color:#f92672>+</span> 1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setMethod</span><span style=color:#f92672>(</span>SegmentationMethod<span style=color:#f92672>.</span><span style=color:#a6e22e>GraphCut</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setDecompose</span><span style=color:#f92672>(</span><span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setBackgroundReplacementColor</span><span style=color:#f92672>(</span>Color<span style=color:#f92672>.</span><span style=color:#a6e22e>getTransparent</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Use a temporary file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setSource</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> FileCreateSource<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;tempFile&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setExportOptions</span><span style=color:#f92672>(</span>pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    results <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ImageMasking<span style=color:#f92672>(</span>image<span style=color:#f92672>).</span><span style=color:#a6e22e>decompose</span><span style=color:#f92672>(</span>options<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage resultImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>results<span style=color:#f92672>[</span>1<span style=color:#f92672>].</span><span style=color:#a6e22e>getImage</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    resultImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;output.png&#34;</span><span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Release resources
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>MaskingResult result <span style=color:#f92672>:</span> results<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    result<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=modifying-default-strokes-for-repeated-auto-masking>Modifying default strokes for repeated auto masking</h3><p>To get better image masking results, Graph Cut segmentation with pre-calculated brushstrokes can be used.
The following example demonstrates saving of the image masking results with feathering based on image size,
modifying obtained default strokes, and using it for the new masking iteration. Image masking is performed using
auto calculated default strokes. Additionally, the data of the two assumed objects is also specified in the
AssumedObjects property of the AutoMaskingGraphCutOptions. After getting the initial masking result, applied
background/foreground strokes are modified and another masking iteration is performed using the new
GraphCutMaskingOptions instance.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// To improve masking results, data of the specific objects that should be included in the foreground masking result could be provided.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>List</span><span style=color:#f92672>&lt;</span>AssumedObjectData<span style=color:#f92672>&gt;</span> assumedObjects <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LinkedList<span style=color:#f92672>&lt;</span>AssumedObjectData<span style=color:#f92672>&gt;();</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// THe object type and the area containing that object should be specified.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>assumedObjects<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> AssumedObjectData<span style=color:#f92672>(</span>DetectedObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>Dog</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> Rectangle<span style=color:#f92672>(</span>300<span style=color:#f92672>,</span> 100<span style=color:#f92672>,</span> 50<span style=color:#f92672>,</span> 30<span style=color:#f92672>)));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MaskingResult<span style=color:#f92672>[]</span> results<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>AutoMaskingGraphCutOptions options<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span> Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;input.jpg&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// To use Graph Cut with auto calculated strokes, AutoMaskingGraphCutOptions is used.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AutoMaskingGraphCutOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setAssumedObjects</span><span style=color:#f92672>(</span>assumedObjects<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Indicating that a new calculation of the default strokes should be performed during the image decomposition.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setCalculateDefaultStrokes</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Setting post-process feathering radius.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setFeatheringRadius</span><span style=color:#f92672>(</span>3<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setMethod</span><span style=color:#f92672>(</span>SegmentationMethod<span style=color:#f92672>.</span><span style=color:#a6e22e>GraphCut</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setDecompose</span><span style=color:#f92672>(</span><span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setBackgroundReplacementColor</span><span style=color:#f92672>(</span>Color<span style=color:#f92672>.</span><span style=color:#a6e22e>getTransparent</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Use a temporary file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setSource</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> FileCreateSource<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;tempFile&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setExportOptions</span><span style=color:#f92672>(</span>pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    results <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ImageMasking<span style=color:#f92672>(</span>image<span style=color:#f92672>).</span><span style=color:#a6e22e>decompose</span><span style=color:#f92672>(</span>options<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// At this point applied foreground/background strokes can be analyzed and based on it additional
</span></span></span><span style=display:flex><span><span style=color:#75715e>// foreground/background strokes can be manually provided.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Point<span style=color:#f92672>[]</span> appliedBackgroundStrokes <span style=color:#f92672>=</span> options<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefaultBackgroundStrokes</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>Point<span style=color:#f92672>[]</span> appliedForegroundStrokes <span style=color:#f92672>=</span> options<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefaultForegroundStrokes</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>Rectangle<span style=color:#f92672>[]</span> appliedObjectRectangles <span style=color:#f92672>=</span> options<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefaultObjectsRectangles</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage resultImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span> results<span style=color:#f92672>[</span>1<span style=color:#f92672>].</span><span style=color:#a6e22e>getImage</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    resultImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;output.png&#34;</span><span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Release resources
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>MaskingResult maskingResult <span style=color:#f92672>:</span> results<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    maskingResult<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// After analyzing results of the first masking iteration, auto calculated foreground/background points
</span></span></span><span style=display:flex><span><span style=color:#75715e>// can be modified to remove inaccurate points and add precise ones.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>appliedBackgroundStrokes<span style=color:#f92672>[</span>5<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Point<span style=color:#f92672>(</span>100<span style=color:#f92672>,</span> 100<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>appliedBackgroundStrokes<span style=color:#f92672>[</span>15<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Point<span style=color:#f92672>(</span>150<span style=color:#f92672>,</span> 100<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>appliedForegroundStrokes<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Point<span style=color:#f92672>(</span>500<span style=color:#f92672>,</span> 200<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>appliedObjectRectangles<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Rectangle<span style=color:#f92672>(</span>100<span style=color:#f92672>,</span> 100<span style=color:#f92672>,</span> 300<span style=color:#f92672>,</span> 300<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span> Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;input.jpg&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// For the second masking iteration, GraphCutMaskingOptions is enough since there is no more need to perform
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// new default strokes calculation using AutoMaskingGraphCutOptions.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    GraphCutMaskingOptions graphCutOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> GraphCutMaskingOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Setting post-process feathering radius.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    graphCutOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setFeatheringRadius</span><span style=color:#f92672>(</span>3<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    graphCutOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setMethod</span><span style=color:#f92672>(</span>SegmentationMethod<span style=color:#f92672>.</span><span style=color:#a6e22e>GraphCut</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    graphCutOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setDecompose</span><span style=color:#f92672>(</span><span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    graphCutOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setBackgroundReplacementColor</span><span style=color:#f92672>(</span>Color<span style=color:#f92672>.</span><span style=color:#a6e22e>getTransparent</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Use a temporary file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setSource</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> FileCreateSource<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;tempFile&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    graphCutOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setExportOptions</span><span style=color:#f92672>(</span>pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Corrected default foreground/background strokes are passed to the
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// AutoMaskingArgs Args property&#39;s ObjectsPoints array.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    AutoMaskingArgs maskingArgs <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AutoMaskingArgs<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    maskingArgs<span style=color:#f92672>.</span><span style=color:#a6e22e>setObjectsPoints</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Point<span style=color:#f92672>[][]</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    appliedBackgroundStrokes<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                    appliedForegroundStrokes
</span></span><span style=display:flex><span>            <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>    maskingArgs<span style=color:#f92672>.</span><span style=color:#a6e22e>setObjectsRectangles</span><span style=color:#f92672>(</span>appliedObjectRectangles<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    graphCutOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setArgs</span><span style=color:#f92672>(</span>maskingArgs<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    results <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ImageMasking<span style=color:#f92672>(</span>image<span style=color:#f92672>).</span><span style=color:#a6e22e>decompose</span><span style=color:#f92672>(</span>graphCutOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Saving final masking result.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage resultImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span> results<span style=color:#f92672>[</span>1<span style=color:#f92672>].</span><span style=color:#a6e22e>getImage</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    resultImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;output.png&#34;</span><span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Release resources
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>MaskingResult maskingResult <span style=color:#f92672>:</span> results<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    maskingResult<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=re-using-default-strokes-in-repeated-auto-masking-with-new-points>Re-using default strokes in repeated auto masking with new points</h3><p>To get better image masking results, Graph Cut segmentation with pre-calculated brushstrokes can be used.
The following example demonstrates saving of the image masking results with feathering based on image size and
re-using masking options for the new masking iteration. Image masking is performed using auto calculated default
strokes. Additionally, the data of the two assumed objects are also specified in the AssumedObjects property of
the AutoMaskingGraphCutOptions. After getting the initial masking results, applied background/foreground strokes
are modified and another masking iteration is performed.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// To improve masking results, data of the specific objects that should be included in the foreground masking result could be provided.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>List</span><span style=color:#f92672>&lt;</span>AssumedObjectData<span style=color:#f92672>&gt;</span> assumedObjects <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>AssumedObjectData<span style=color:#f92672>&gt;(</span>2<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// THe object type and the area containing that object should be specified.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>assumedObjects<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> AssumedObjectData<span style=color:#f92672>(</span>DetectedObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>Human</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> Rectangle<span style=color:#f92672>(</span>100<span style=color:#f92672>,</span> 100<span style=color:#f92672>,</span> 150<span style=color:#f92672>,</span> 300<span style=color:#f92672>)));</span>
</span></span><span style=display:flex><span>assumedObjects<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> AssumedObjectData<span style=color:#f92672>(</span>DetectedObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>Dog</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> Rectangle<span style=color:#f92672>(</span>300<span style=color:#f92672>,</span> 100<span style=color:#f92672>,</span> 50<span style=color:#f92672>,</span> 30<span style=color:#f92672>)));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MaskingResult<span style=color:#f92672>[]</span> results<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>AutoMaskingGraphCutOptions options<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// First masking iteration is performed to get auto calculated foreground/background brushstrokes.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;input.jpg&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// To use Graph Cut with auto calculated strokes, AutoMaskingGraphCutOptions is used.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AutoMaskingGraphCutOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setAssumedObjects</span><span style=color:#f92672>(</span>assumedObjects<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Indicating that a new calculation of the default strokes should be performed during the image decomposition.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setCalculateDefaultStrokes</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Setting post-process feathering radius.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setFeatheringRadius</span><span style=color:#f92672>(</span>3<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setMethod</span><span style=color:#f92672>(</span>SegmentationMethod<span style=color:#f92672>.</span><span style=color:#a6e22e>GraphCut</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setDecompose</span><span style=color:#f92672>(</span><span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setBackgroundReplacementColor</span><span style=color:#f92672>(</span>Color<span style=color:#f92672>.</span><span style=color:#a6e22e>getTransparent</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Use a temporary file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setSource</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> FileCreateSource<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;tempFile&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setExportOptions</span><span style=color:#f92672>(</span>pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    results <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ImageMasking<span style=color:#f92672>(</span>image<span style=color:#f92672>).</span><span style=color:#a6e22e>decompose</span><span style=color:#f92672>(</span>options<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Release resources
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>MaskingResult maskingResult <span style=color:#f92672>:</span> results<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    maskingResult<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// At this point applied foreground/background strokes can be analyzed and based on it additional
</span></span></span><span style=display:flex><span><span style=color:#75715e>// foreground/background strokes can be manually provided.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Point<span style=color:#f92672>[]</span> appliedBackgroundStrokes <span style=color:#f92672>=</span> options<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefaultBackgroundStrokes</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>Point<span style=color:#f92672>[]</span> appliedForegroundStrokes <span style=color:#f92672>=</span> options<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefaultForegroundStrokes</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>Rectangle<span style=color:#f92672>[]</span> appliedObjectRectangles <span style=color:#f92672>=</span> options<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefaultObjectsRectangles</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage resultImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>results<span style=color:#f92672>[</span>1<span style=color:#f92672>].</span><span style=color:#a6e22e>getImage</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    resultImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;output.png&#34;</span><span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Second masking iteration is performed to further improve masking quality by adding new manually chosen foreground/background points.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;input.jpg&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Re-using AutoMaskingGraphCutOptions there is no need to perform default stroke calculations a second time.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setCalculateDefaultStrokes</span><span style=color:#f92672>(</span><span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// When both default strokes and ObjectsPoints in the Args property of AutoMaskingArgs are provided, Point arrays are end up combined.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// The first ObjectsPoints array is considered to be a background points array and
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// the second ObjectsPoints array is considered to be a foreground points array.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// When both DefaultObjectsRectangles and ObjectsRectangles in the Args property of AutoMaskingArgs are provided,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// only the array from the Args is being used.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    AutoMaskingArgs maskingArgs <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AutoMaskingArgs<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    maskingArgs<span style=color:#f92672>.</span><span style=color:#a6e22e>setObjectsPoints</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Point<span style=color:#f92672>[][]</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>new</span> Point<span style=color:#f92672>[]</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>new</span> Point<span style=color:#f92672>(</span>100<span style=color:#f92672>,</span> 100<span style=color:#f92672>),</span> <span style=color:#66d9ef>new</span> Point<span style=color:#f92672>(</span>150<span style=color:#f92672>,</span> 100<span style=color:#f92672>)</span> <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>new</span> Point<span style=color:#f92672>[]</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>new</span> Point<span style=color:#f92672>(</span>500<span style=color:#f92672>,</span> 200<span style=color:#f92672>)</span> <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>    maskingArgs<span style=color:#f92672>.</span><span style=color:#a6e22e>setObjectsRectangles</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Rectangle<span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#66d9ef>new</span> Rectangle<span style=color:#f92672>(</span>100<span style=color:#f92672>,</span> 100<span style=color:#f92672>,</span> 300<span style=color:#f92672>,</span> 300<span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setArgs</span><span style=color:#f92672>(</span>maskingArgs<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    results <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ImageMasking<span style=color:#f92672>(</span>image<span style=color:#f92672>).</span><span style=color:#a6e22e>decompose</span><span style=color:#f92672>(</span>options<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Saving final masking result.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage resultImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>results<span style=color:#f92672>[</span>1<span style=color:#f92672>].</span><span style=color:#a6e22e>getImage</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    resultImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;output.png&#34;</span><span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Release resources
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>MaskingResult maskingResult <span style=color:#f92672>:</span> results<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    maskingResult<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=using-graph-cut-auto-masking-with-specified-assumed-objects-data>Using Graph Cut auto masking with specified assumed objects data.</h3><p>To get better image masking results, Graph Cut segmentation with pre-calculated brushstrokes can be used. The following
example demonstrates saving of the image masking results with feathering based on image size. Image masking is performed
using auto calculated default strokes. Additionally, the data of the two assumed objects are also specified in the
AssumedObjects property of the AutoMaskingGraphCutOptions.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// To improve masking results, data of the specific objects that should be included in the foreground masking result could be provided.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>List</span><span style=color:#f92672>&lt;</span>AssumedObjectData<span style=color:#f92672>&gt;</span> assumedObjects <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>AssumedObjectData<span style=color:#f92672>&gt;(</span>2<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// THe object type and the area containing that object should be specified.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>assumedObjects<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> AssumedObjectData<span style=color:#f92672>(</span>DetectedObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>Human</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> Rectangle<span style=color:#f92672>(</span>100<span style=color:#f92672>,</span> 100<span style=color:#f92672>,</span> 150<span style=color:#f92672>,</span> 300<span style=color:#f92672>)));</span>
</span></span><span style=display:flex><span>assumedObjects<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> AssumedObjectData<span style=color:#f92672>(</span>DetectedObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>Dog</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> Rectangle<span style=color:#f92672>(</span>300<span style=color:#f92672>,</span> 100<span style=color:#f92672>,</span> 50<span style=color:#f92672>,</span> 30<span style=color:#f92672>)));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MaskingResult<span style=color:#f92672>[]</span> results<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;input.jpg&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// To use Graph Cut with auto calculated strokes, AutoMaskingGraphCutOptions is used.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    AutoMaskingGraphCutOptions options <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AutoMaskingGraphCutOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setAssumedObjects</span><span style=color:#f92672>(</span>assumedObjects<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Indicating that a new calculation of the default strokes should be performed during the image decomposition.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setCalculateDefaultStrokes</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Setting post-process feathering radius.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setFeatheringRadius</span><span style=color:#f92672>((</span>Math<span style=color:#f92672>.</span><span style=color:#a6e22e>max</span><span style=color:#f92672>(</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getWidth</span><span style=color:#f92672>(),</span> image<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeight</span><span style=color:#f92672>())</span> <span style=color:#f92672>/</span> 500<span style=color:#f92672>)</span> <span style=color:#f92672>+</span> 1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setMethod</span><span style=color:#f92672>(</span>SegmentationMethod<span style=color:#f92672>.</span><span style=color:#a6e22e>GraphCut</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setDecompose</span><span style=color:#f92672>(</span><span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setBackgroundReplacementColor</span><span style=color:#f92672>(</span>Color<span style=color:#f92672>.</span><span style=color:#a6e22e>getTransparent</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Use a temporary file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setSource</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> FileCreateSource<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;tempFile&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setExportOptions</span><span style=color:#f92672>(</span>pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    results <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ImageMasking<span style=color:#f92672>(</span>image<span style=color:#f92672>).</span><span style=color:#a6e22e>decompose</span><span style=color:#f92672>(</span>options<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Saving final masking result.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage resultImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>results<span style=color:#f92672>[</span>1<span style=color:#f92672>].</span><span style=color:#a6e22e>getImage</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    resultImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;output.png&#34;</span><span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Release resources
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>MaskingResult maskingResult <span style=color:#f92672>:</span> results<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    maskingResult<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=performing-graph-cut-segmentation-with-user-defined-point-and-feathering-radius>Performing Graph Cut segmentation with user-defined point and feathering radius.</h3><p>To get better image masking results, Graph Cut segmentation with pre-calculated brushstrokes can be used.
The following example demonstrates saving of the Graph Cut image masking result with feathering set to 3.
Image masking is performed using the user-defined Point array.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>MaskingResult<span style=color:#f92672>[]</span> results<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;input.jpg&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// To use Graph Cut with auto calculated strokes, AutoMaskingGraphCutOptions is used.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    GraphCutMaskingOptions options <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> GraphCutMaskingOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Setting post-process feathering radius.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setFeatheringRadius</span><span style=color:#f92672>(</span>3<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setMethod</span><span style=color:#f92672>(</span>SegmentationMethod<span style=color:#f92672>.</span><span style=color:#a6e22e>GraphCut</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setDecompose</span><span style=color:#f92672>(</span><span style=color:#66d9ef>false</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setBackgroundReplacementColor</span><span style=color:#f92672>(</span>Color<span style=color:#f92672>.</span><span style=color:#a6e22e>getTransparent</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Foreground/background strokes are passed to the
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// AutoMaskingArgs Args property&#39;s ObjectsPoints array.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    AutoMaskingArgs maskingArgs <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AutoMaskingArgs<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    maskingArgs<span style=color:#f92672>.</span><span style=color:#a6e22e>setObjectsPoints</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Point<span style=color:#f92672>[][]</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>new</span> Point<span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>                            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                                    <span style=color:#66d9ef>new</span> Point<span style=color:#f92672>(</span>100<span style=color:#f92672>,</span> 100<span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>                            <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setArgs</span><span style=color:#f92672>(</span>maskingArgs<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Use a temporary file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setSource</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> FileCreateSource<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;tempFile&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    options<span style=color:#f92672>.</span><span style=color:#a6e22e>setExportOptions</span><span style=color:#f92672>(</span>pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    results <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ImageMasking<span style=color:#f92672>(</span>image<span style=color:#f92672>).</span><span style=color:#a6e22e>decompose</span><span style=color:#f92672>(</span>options<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Saving final masking result.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage resultImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>results<span style=color:#f92672>[</span>1<span style=color:#f92672>].</span><span style=color:#a6e22e>getImage</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    resultImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;output.png&#34;</span><span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Release resources
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>MaskingResult maskingResult <span style=color:#f92672>:</span> results<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    maskingResult<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>IMAGINGJAVA-1907 Enhance EPS fileformat inherinance to support rotate, resize, flip etc operations as vector images support</strong></p><h3 id=what-is-eps-image-format>What is EPS image format?</h3><p>EPS file format is short for Encapsulated PostScript. It was created by Adobe back in 1992.
It&rsquo;s a standard graphics file format intended for placing images or drawings within a PostScript Document.
Basically it&rsquo;s a postscript program saved as a single file. EPS file also includes a low-resolution preview
of the graphics inside which makes it accessible with programs not capable of editing the script inside.
EPS file format is widely used by publishers because of its compatibility across different operating systems.</p><p>An EPS file can contain any combination of text, graphics, and images. Since it is actually a PostScript file,
it is one of the most versatile file formats that are available. The files are supported by several different
drawing programs and vector graphic editing applications. Many image converter programs can create EPS files
containing the pixels of the image. An EPS file is a stream of generic PostScript printing commands. Thus many
PostScript printer drivers have an option to save as EPS.</p><h3 id=how-to-resize-eps-image>How to resize EPS image?</h3><p><strong>Image</strong> class contains several <strong>Resize</strong> methods which allow to resize any image type including EPS image.
The following source code sample shows how you can load, resize and export EPS image to PNG format:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Load EPS image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>Image image <span style=color:#f92672>=</span> Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;AstrixObelix.eps&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Resize the image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>resize</span><span style=color:#f92672>(</span>500<span style=color:#f92672>,</span> 800<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Export image to PNG format
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;ExportResult1.png&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=resize-image-using-special-resize-type>Resize image using special Resize Type</h3><p><strong>Aspose.Imaging</strong> library allows you to specify the Resize Type. The following source code sample is using the Mitchell cubic interpolation method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Load EPS image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>Image image <span style=color:#f92672>=</span> Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;AstrixObelix.eps&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Resize the image using the Mitchell cubic interpolation method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>resize</span><span style=color:#f92672>(</span>400<span style=color:#f92672>,</span> 400<span style=color:#f92672>,</span> ResizeType<span style=color:#f92672>.</span><span style=color:#a6e22e>Mitchell</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Export image to PNG format
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;ExportResult2.png&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=resize-eps-image-using-advanced-settings>Resize EPS image using advanced settings</h3><p>In case if you need a full control on resize operation, you can specify an advanced resize settings.
The following code shows how you can set Filter Type, Color Compare Method and other settings:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Load EPS image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>Image image <span style=color:#f92672>=</span> Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;AstrixObelix.eps&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Resize the image using advanced resize settings
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	ImageResizeSettings resizeSettings <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ImageResizeSettings<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Set the interpolation mode
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	resizeSettings<span style=color:#f92672>.</span><span style=color:#a6e22e>setMode</span><span style=color:#f92672>(</span>ResizeType<span style=color:#f92672>.</span><span style=color:#a6e22e>LanczosResample</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Set the type of the filter
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	resizeSettings<span style=color:#f92672>.</span><span style=color:#a6e22e>setFilterType</span><span style=color:#f92672>(</span>ImageFilterType<span style=color:#f92672>.</span><span style=color:#a6e22e>SmallRectangular</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Sets the color compare method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	resizeSettings<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorCompareMethod</span><span style=color:#f92672>(</span>ColorCompareMethod<span style=color:#f92672>.</span><span style=color:#a6e22e>Euclidian</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Set the color quantization method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	resizeSettings<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorQuantizationMethod</span><span style=color:#f92672>(</span>ColorQuantizationMethod<span style=color:#f92672>.</span><span style=color:#a6e22e>Popularity</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	image<span style=color:#f92672>.</span><span style=color:#a6e22e>resize</span><span style=color:#f92672>(</span>400<span style=color:#f92672>,</span> 400<span style=color:#f92672>,</span> resizeSettings<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Export image to PNG format
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;ExportResult3.png&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>IMAGINGJAVA-1901 Index was outside the bounds of the array exception when loading DNG</strong></p><h3 id=load-and-export-a-dng-image-as-a-png-image>Load and export a DNG image as a PNG image</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>Image image <span style=color:#f92672>=</span> Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;sample.dng&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;sample.dng.png&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>IMAGINGJAVA-1900 Support of making gifs and other multi-page (multi-frame) files from set of images</strong></p><h3 id=multipage-image-formats>Multipage image formats</h3><p><strong>Aspose.Imaging</strong> has proved to be a powerful API for working with a variety of image formats. Along with
single-page images, <strong>Aspose.Imaging</strong> also supports manipulating multipage images including Gif, Tiff, Psd,
Dicom, WebP etc. Using <strong>Aspose.Imaging</strong> library the image can be exported also to multipage PDF document.
You can access pages of a multipage image and export them to a single page or another multipage image format.
But its possible to save a set of single page images to any supported multipage image format.
This article describes how you can do that.</p><h3 id=create-multipage-images-using-addpage-method>Create multipage images using addPage method</h3><p>You can create multipage image using <strong>addPage()</strong> method. The following code shows how you can create animated
images using image frames from the folder:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Load frames
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>List</span><span style=color:#f92672>&lt;</span>RasterImage<span style=color:#f92672>&gt;</span> frames <span style=color:#f92672>=</span> loadFrames<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Animation frames&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Create GIF image using the first frame
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>GifImage image <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> GifImage<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> GifFrameBlock<span style=color:#f92672>(</span>frames<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>0<span style=color:#f92672>))))</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Add frames to the GIF image using the AddPage method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> index <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> index <span style=color:#f92672>&lt;</span> frames<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span> index<span style=color:#f92672>++)</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>				image<span style=color:#f92672>.</span><span style=color:#a6e22e>addPage</span><span style=color:#f92672>(</span>frames<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>index<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Save GIF image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Multipage.gif&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Create TIFF image using the first frame
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>TiffImage image <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TiffImage<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> TiffFrame<span style=color:#f92672>(</span>frames<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>0<span style=color:#f92672>))))</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Add frames to the TIFF image using the AddPage method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> index <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> index <span style=color:#f92672>&lt;</span> frames<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span> index<span style=color:#f92672>++)</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>				image<span style=color:#f92672>.</span><span style=color:#a6e22e>addPage</span><span style=color:#f92672>(</span>frames<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>index<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Save TIFF image using options
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			TiffOptions options <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TiffOptions<span style=color:#f92672>(</span>TiffExpectedFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>TiffJpegRgb</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>			image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Multipage.tif&#34;</span><span style=color:#f92672>,</span> options<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Create WEBP image using the first frame
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>WebPImage image <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> WebPImage<span style=color:#f92672>(</span>frames<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>0<span style=color:#f92672>)))</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Add frames to the WEBP image using the AddPage method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> index <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> index <span style=color:#f92672>&lt;</span> frames<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span> index<span style=color:#f92672>++)</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>				image<span style=color:#f92672>.</span><span style=color:#a6e22e>addPage</span><span style=color:#f92672>(</span>frames<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>index<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Save WEBP image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Multipage.webp&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Determine frame size
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		Size framesize <span style=color:#f92672>=</span> frames<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>0<span style=color:#f92672>).</span><span style=color:#a6e22e>getSize</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Create APNG image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>ApngImage image <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ApngImage<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> ApngOptions<span style=color:#f92672>(),</span> framesize<span style=color:#f92672>.</span><span style=color:#a6e22e>getWidth</span><span style=color:#f92672>(),</span> framesize<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeight</span><span style=color:#f92672>()))</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Add frames to the APNG image using the AddPage method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>RasterImage frame <span style=color:#f92672>:</span> frames<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>				image<span style=color:#f92672>.</span><span style=color:#a6e22e>addPage</span><span style=color:#f92672>(</span>frame<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Save APNG image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Multipage.png&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Determine frame size
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		framesize <span style=color:#f92672>=</span> frames<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>0<span style=color:#f92672>).</span><span style=color:#a6e22e>getSize</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Create DICOM image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>DicomImage image <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> DicomImage<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> DicomOptions<span style=color:#f92672>(),</span> framesize<span style=color:#f92672>.</span><span style=color:#a6e22e>getWidth</span><span style=color:#f92672>(),</span> framesize<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeight</span><span style=color:#f92672>()))</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Add frames to the APNG image using the AddPage method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>RasterImage frame <span style=color:#f92672>:</span> frames<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>				image<span style=color:#f92672>.</span><span style=color:#a6e22e>addPage</span><span style=color:#f92672>(</span>frame<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Remove default empty page
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			image<span style=color:#f92672>.</span><span style=color:#a6e22e>removePage</span><span style=color:#f92672>(</span>0<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Save DICOM image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Multipage.dcm&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Release resources
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>RasterImage frame <span style=color:#f92672>:</span> frames<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			frame<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>List</span><span style=color:#f92672>&lt;</span>RasterImage<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>loadFrames</span><span style=color:#f92672>(</span>String directory<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>List</span><span style=color:#f92672>&lt;</span>RasterImage<span style=color:#f92672>&gt;</span> l <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LinkedList<span style=color:#f92672>&lt;</span>RasterImage<span style=color:#f92672>&gt;();</span>
</span></span><span style=display:flex><span>	java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>.</span><span style=color:#a6e22e>File</span><span style=color:#f92672>[]</span> files <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>.</span><span style=color:#a6e22e>File</span><span style=color:#f92672>(</span>directory<span style=color:#f92672>).</span><span style=color:#a6e22e>listFiles</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>files <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>.</span><span style=color:#a6e22e>File</span> filePath <span style=color:#f92672>:</span> files<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			l<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>((</span>RasterImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>filePath<span style=color:#f92672>.</span><span style=color:#a6e22e>getAbsolutePath</span><span style=color:#f92672>()));</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> l<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=create-multipage-image-from-vector-images>Create multipage image from vector images</h3><p>In order to use vector images as animation frames you need to rasterize them first.
The following source code sample shows how to create TIFF image using vector images:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>multipageFromVector</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Rasterize vector images
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	rasterizeSvgToPng<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Vector images\\cube.svg&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Vector images\\Rasterized\\cube.png&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	rasterizeSvgToPng<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Vector images\\greenGrapes.svg&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Vector images\\Rasterized\\greenGrapes.png&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	rasterizeSvgToPng<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Vector images\\text.svg&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Vector images\\Rasterized\\text.png&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Load frames
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>List</span><span style=color:#f92672>&lt;</span>RasterImage<span style=color:#f92672>&gt;</span> frames <span style=color:#f92672>=</span> loadFrames<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Vector images\\Rasterized\\&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Create TIFF image using the first frame
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>TiffImage image <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TiffImage<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> TiffFrame<span style=color:#f92672>(</span>frames<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>0<span style=color:#f92672>))))</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Add frames to the TIFF image using the AddPage method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> index <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> index <span style=color:#f92672>&lt;</span> frames<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span> index<span style=color:#f92672>++)</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>				image<span style=color:#f92672>.</span><span style=color:#a6e22e>addPage</span><span style=color:#f92672>(</span>frames<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>index<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Save TIFF image using options
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			TiffOptions options <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> TiffOptions<span style=color:#f92672>(</span>TiffExpectedFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>TiffJpegRgb</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>			image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;MultipageFromVector.tif&#34;</span><span style=color:#f92672>,</span> options<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Release resources
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>RasterImage frame <span style=color:#f92672>:</span> frames<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			frame<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>List</span><span style=color:#f92672>&lt;</span>RasterImage<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>loadFrames</span><span style=color:#f92672>(</span>String directory<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>List</span><span style=color:#f92672>&lt;</span>RasterImage<span style=color:#f92672>&gt;</span> l <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LinkedList<span style=color:#f92672>&lt;</span>RasterImage<span style=color:#f92672>&gt;();</span>
</span></span><span style=display:flex><span>	java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>.</span><span style=color:#a6e22e>File</span><span style=color:#f92672>[]</span> files <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>.</span><span style=color:#a6e22e>File</span><span style=color:#f92672>(</span>directory<span style=color:#f92672>).</span><span style=color:#a6e22e>listFiles</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>files <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>.</span><span style=color:#a6e22e>File</span> filePath <span style=color:#f92672>:</span> files<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			l<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>((</span>RasterImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>filePath<span style=color:#f92672>.</span><span style=color:#a6e22e>getAbsolutePath</span><span style=color:#f92672>()));</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> l<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>rasterizeSvgToPng</span><span style=color:#f92672>(</span>String inputPath<span style=color:#f92672>,</span> String outputPath<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Load vector image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>Image image <span style=color:#f92672>=</span> Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>inputPath<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		SvgRasterizationOptions rasterizationOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SvgRasterizationOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>		rasterizationOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setPageWidth</span><span style=color:#f92672>(</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getWidth</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>		rasterizationOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setPageHeight</span><span style=color:#f92672>(</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>		pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setVectorRasterizationOptions</span><span style=color:#f92672>(</span>rasterizationOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Save PNG image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>outputPath<span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>IMAGINGJAVA-1895 Fix color conversion between 16Bpp565, 16Bpp555 and 32BppRgb formats</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>RasterImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;decHex_16Bpp565.bmp&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	IColorPalette palette <span style=color:#f92672>=</span> ColorPaletteHelper<span style=color:#f92672>.</span><span style=color:#a6e22e>getCloseImagePalette</span><span style=color:#f92672>(</span>image<span style=color:#f92672>,</span> 256<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	BmpOptions bmpOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BmpOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>	bmpOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setCompression</span><span style=color:#f92672>(</span>BitmapCompression<span style=color:#f92672>.</span><span style=color:#a6e22e>Rgb</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	bmpOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setBitsPerPixel</span><span style=color:#f92672>(</span>8<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	bmpOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setPalette</span><span style=color:#f92672>(</span>palette<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>	pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setProgressive</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>IndexedColor</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setCompressionLevel</span><span style=color:#f92672>(</span>9<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setPalette</span><span style=color:#f92672>(</span>palette<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;out.bmp&#34;</span><span style=color:#f92672>,</span> bmpOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;out.png&#34;</span><span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>IMAGINGJAVA-1894 Exception on exporting EMF to PDF</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>EmfImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>EmfImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;1.emf&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	PdfOptions pdfOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PdfOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>	EmfRasterizationOptions rasterizationOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> EmfRasterizationOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>	rasterizationOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setPageWidth</span><span style=color:#f92672>(</span>210 <span style=color:#f92672>*</span> 96 <span style=color:#f92672>/</span> 25<span style=color:#f92672>.</span><span style=color:#a6e22e>4f</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	rasterizationOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setPageHeight</span><span style=color:#f92672>(</span>297 <span style=color:#f92672>*</span> 96 <span style=color:#f92672>/</span> 25<span style=color:#f92672>.</span><span style=color:#a6e22e>4f</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	pdfOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setVectorRasterizationOptions</span><span style=color:#f92672>(</span>rasterizationOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;1.emf.pdf&#34;</span><span style=color:#f92672>,</span> pdfOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>IMAGINGJAVA-1893 SVGZ result image damaged in PDF conversion and other conversions</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String baseFolder <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;D:\\&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String fileName <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;sample.svgz&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String inputFileName <span style=color:#f92672>=</span> baseFolder <span style=color:#f92672>+</span> fileName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String outputImagePdf <span style=color:#f92672>=</span> inputFileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.pdf&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String outputImagePng <span style=color:#f92672>=</span> inputFileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>aspose</span><span style=color:#f92672>.</span><span style=color:#a6e22e>imaging</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Image</span> image <span style=color:#f92672>=</span> com<span style=color:#f92672>.</span><span style=color:#a6e22e>aspose</span><span style=color:#f92672>.</span><span style=color:#a6e22e>imaging</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Image</span><span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>inputFileName<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>outputImagePdf<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PdfOptions<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>outputImagePng<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>IMAGINGJAVA-1892 Exception on loading CDR file</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String fileName <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;ANGEL03.CDR&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String baseFolder <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;D:\\&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String inputFilePath <span style=color:#f92672>=</span> baseFolder <span style=color:#f92672>+</span> fileName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String outputFilePath <span style=color:#f92672>=</span> inputFilePath <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>Image image <span style=color:#f92672>=</span> Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>inputFilePath<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>   image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>outputFilePath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>IMAGINGJAVA-1891 Wrong processing of SVG image</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String baseFolder <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;D:\\&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String fileName <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;chartReport.svg&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String inputFileName <span style=color:#f92672>=</span> baseFolder <span style=color:#f92672>+</span> fileName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String outputFileName <span style=color:#f92672>=</span> inputFileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.jpg&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>Image image <span style=color:#f92672>=</span> Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>inputFileName<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>     image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>outputFileName<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> JpegOptions<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>IMAGINGJAVA-1890 Saving jpg after watermark throwing exception</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>JpegImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>JpegImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;aECO117390_Hebrew.jpg&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> LoadOptions<span style=color:#f92672>()))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Result.jpg&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Verify metadata in Result.jpg using Photoshop or other viewer
</span></span></span></code></pre></div><p><strong>IMAGINGJAVA-1889 Invalid results of the export from PNG to SVG format</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>Image image <span style=color:#f92672>=</span> Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;lena_16g_lin.png&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    SvgOptions options <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SvgOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;lena_16g_lin.png.svg&#34;</span><span style=color:#f92672>,</span> options<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>IMAGINGJAVA-1873 ColorPaletteHelper produces incorrect palette for BMP RGB565 images</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>try</span> <span style=color:#f92672>(</span>Image image <span style=color:#f92672>=</span> Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;decHex_16Bpp565.bmp&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	BmpOptions bmpOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BmpOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>	bmpOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setCompression</span><span style=color:#f92672>(</span>BitmapCompression<span style=color:#f92672>.</span><span style=color:#a6e22e>Rgb</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	bmpOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setBitsPerPixel</span><span style=color:#f92672>(</span>8<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	bmpOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setPalette</span><span style=color:#f92672>(</span>ColorPaletteHelper<span style=color:#f92672>.</span><span style=color:#a6e22e>getCloseImagePalette</span><span style=color:#f92672>((</span>RasterImage<span style=color:#f92672>)</span>image<span style=color:#f92672>,</span> 256<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>	image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;output.bmp&#34;</span><span style=color:#f92672>,</span> bmpOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>	pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setProgressive</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>IndexedColor</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setCompressionLevel</span><span style=color:#f92672>(</span>9<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setPalette</span><span style=color:#f92672>(</span>ColorPaletteHelper<span style=color:#f92672>.</span><span style=color:#a6e22e>getCloseImagePalette</span><span style=color:#f92672>((</span>RasterImage<span style=color:#f92672>)</span>image<span style=color:#f92672>,</span> 256<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;output.png&#34;</span><span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></p></div></div></div></div><hr></div></div></section></div></div></div></div></div></div><div id=dvHidden style=display:none></div><div id=footer></div><a class=backtop>&nbsp;</a><div id=DynabicMenuFooter></div><script type=text/javascript>const langarray=[]</script><script type=text/javascript>jQuery(document).ready(function(){let e=$(".nested").hide(),t=$(".treeview-animated-element");$(".treeview-animated-items-header").hover(function(){$(this).children.toggleClass("Mydiv")}),$(".treeview-animated-items-header").click(function(){return console.log("mala"),$this=$(this),console.log($this.attr("id")),$target=$this.siblings(".nested"),$pointerPlus=$this.children(".fa-plus"),$pointerMinus=$this.children(".fa-minus"),$pointerPlus.removeClass("fa-plus"),$pointerPlus.addClass("fa-minus"),$pointerMinus.removeClass("fa-minus"),$pointerMinus.addClass("fa-plus"),$this.toggleClass("open"),$target.hasClass("active")?$target.removeClass("active").slideUp():$target.addClass("active").slideDown(),!1})})</script><script>(function(e,s,o,a,t,n,i){e.ContainerizeMenuObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=s.createElement(o),i=s.getElementsByTagName(o)[0],n.async=1,n.src=a,i.parentNode.append(n)})(window,document,"script","https://menu.containerize.com/scripts/engine.min.js?v=1.0.1","aspose-en")</script><script src=https://releases-qa.aspose.com/res_repo/js/highlight.min.js></script>
<script src=https://releases-qa.aspose.com/res_repo/js/bootstrap.min.js></script>
<script src=/js/bundle.min.js></script>
<script src=/js/dynabic.treeview.js></script>
<script src=/js/treeviewmanager.js></script>
<script>hljs.highlightAll()</script><link rel=stylesheet type=text/css href=https://releases-qa.aspose.com/res_repo/css/hugocustom.css><script>$(".btn-showside .mb-5").on("click",function(){$("main .flex .dn.db-l").toggleClass("showsidebar"),$("main .flex .w-100").toggleClass("noscroll")}),$(".btn-showmenu").on("click",function(){$("nav.bg-primary-color-dark").toggleClass("showmenu")}),$(".btn-plain").on("click",function(){$("main .flex .dn.db-l").removeClass("showsidebar"),$("main .flex .dn.db-l").removeClass("showsidebar"),$("nav.bg-primary-color-dark").removeClass("showmenu")}),$(".ss-bar ul li a[data-target]").on("click",function(){$(this).find(".i.fa-angle-down").hasClass("fa-angle-up")?$(this).find("i.fa-angle-down").removeClass("fa-angle-up"):$(this).find("i.fa-angle-down").toggleClass("fa-angle-up")}),$(".btn-showside").on("click",function(){$(".ss-bar").toggleClass("showsidebar")}),$(".btn-plain").on("click",function(){$(".ss-bar").removeClass("showsidebar")})</script><script>$(document).ready(function(){$("div pre").removeAttr("style");var e,t=$(location).attr("hash");"#package-explorer"==t&&(e=document.querySelector('.nav-tabs a[href="#packageexplorer-tab"]'),e&&e.click()),$('a:has(img[alt="banner"]').click(function(){event.preventDefault();var e=document.querySelector('.nav-tabs a[href="#packageexplorer-tab"]');e&&e.click()}),$(window).scroll(function(){$(this).scrollTop()>150?$(".backtop").fadeIn():$(".backtop").fadeOut()}),$(".backtop").click(function(){return $("html, body").animate({scrollTop:0},600),!1}),$(".linkshow").on("click",function(){$(this).find("i").toggleClass("fa-minus-square"),$(".linkshowbox").toggleClass("hide")}),document.querySelector("body").addEventListener("click",function(t){if(t.target.classList.contains("searchButton")){$(".ss-bar").removeClass("showsidebar");try{var e=$("input[name=q]").val();gtag("config","UA-3109235-2",{page_path:"/search/?q="+e})}catch(e){}}if(t.target.classList.contains("fa-search")){$(".ss-bar").removeClass("showsidebar");try{e=$("input[name=q]").val(),gtag("config","UA-3109235-2",{page_path:"/search/?q="+e})}catch(e){}}},!0)})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>