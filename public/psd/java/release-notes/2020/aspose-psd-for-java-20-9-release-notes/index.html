<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Aspose.PSD for Java 20.9 - Release Notes</title><meta name=description content="Aspose.PSD for Java 20.9 - Release Notes – the latest updates and fixes."><meta name=viewport content="width=device-width,minimum-scale=1"><link rel=canonical href=https://releases-qa.aspose.com/psd/java/release-notes/2020/aspose-psd-for-java-20-9-release-notes/><link rel=alternate hreflang=x-default href=https://releases-qa.aspose.com/psd/java/release-notes/2020/aspose-psd-for-java-20-9-release-notes/><meta name=robots content="noindex, nofollow"><link rel=apple-touch-icon sizes=180x180 href=/res_repo/apple-touch-icon.png><link rel=icon type=image/png href=/res_repo/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/res_repo/favicon-16x16.png sizes=16x16><link rel=mask-icon href=/res_repo/safari-pinned-tab.svg color=#0594cb><meta name=theme-color content="#ffffff"><meta property="og:title" content="Aspose.PSD for Java 20.9 - Release Notes "><meta property="og:description" content="Aspose.PSD for Java 20.9 - Release Notes – the latest updates and fixes."><meta property="og:type" content="article"><meta property="og:url" content="https://releases-qa.aspose.com/psd/java/release-notes/2020/aspose-psd-for-java-20-9-release-notes/"><meta itemprop=name content="Aspose.PSD for Java 20.9 - Release Notes"><meta itemprop=description content="Aspose.PSD for Java 20.9 - Release Notes – the latest updates and fixes."><meta itemprop=wordCount content="4271"><meta name=twitter:card content="summary"><meta name=twitter:title content="Aspose.PSD for Java 20.9 - Release Notes"><meta name=twitter:description content="Aspose.PSD for Java 20.9 - Release Notes – the latest updates and fixes."><link href=/css/bootstrap.css rel=stylesheet type=text/css><script src=https://releases-qa.aspose.com/res_repo/js/jquery-1.10.2.min.js></script></head><body><div id=header></div><div class=downloadpage><div class="container-fluid bcrumb1"><div id=sticky1 class=stickytopheight>&nbsp;</div><div class=container><div class=moduletable><ul id=dvBC class=breadcrumb><li><a href=/>Home</a><span class=divider></span></li><li><a href=/psd/>Aspose.PSD Product Family</a><span class=divider></span></li><li><a href=/psd/java/>Aspose.PSD for Java</a><span class=divider></span></li><li><a href=/psd/java/release-notes/>Release Notes</a><span class=divider></span></li><li><a href=/psd/java/release-notes/2020/>2020</a><span class=divider></span></li><li><a href=/psd/java/release-notes/2020/aspose-psd-for-java-20-9-release-notes/>Aspose.PSD for Java 20.9 - Release Notes</a><span class=divider></span></li></ul></div></div></div><div class="container-fluid content2 vpanel-left"><div class=container><div class=row><div class="col-md-3 vpanel tree-section"><p class=list-title>Browse our Products<button type=button class=treeview-toggle> <span class=sr-only>Toggle navigation</span> <span class="icon expand-icon glyphicon glyphicon-hide"></span></button></p><div id=tree class="treeview hidetree"></div></div><div class="col-md-9 lhs1 col-xs-12 mobilehide node-section"><div class=box1><section role=main class="main-container page-package-details"><div class=row><div class="col-sm-9 package-details-main"><h1><strong>Aspose.PSD for Java 20.9 - Release Notes</strong></h1><div class="tab-content body-tab-content"><div role=tabpanel class="tab-pane active" id=readme-tab><div class=readme-common><div id=readme-container><p><div class="alert alert-primary" role=alert>This page contains release notes for <a href=https://releases.aspose.com/psd/java/20-9/>Aspose.PSD for Java 20.9</a></div><table><thead><tr><th style=text-align:left><strong>Key</strong></th><th style=text-align:left><strong>Summary</strong></th><th style=text-align:left><strong>Category</strong></th></tr></thead><tbody><tr><td style=text-align:left>PSDJAVA-272</td><td style=text-align:left>In a specific PSD file, resizing TextLayer breaks the location value</td><td style=text-align:left>Bug</td></tr><tr><td style=text-align:left>PSDJAVA-273</td><td style=text-align:left>Updating text in given PSD file and saving it changes some layer and many text parameters</td><td style=text-align:left>Bug</td></tr><tr><td style=text-align:left>PSDJAVA-276</td><td style=text-align:left>Support of Linked Smart objects</td><td style=text-align:left>Feature</td></tr><tr><td style=text-align:left>PSDJAVA-278</td><td style=text-align:left>Regression: Aspose.PSD 20.8.0 can’t open file</td><td style=text-align:left>Bug</td></tr><tr><td style=text-align:left>PSDJAVA-279</td><td style=text-align:left>FillLayer are not updated after the creation and can not be rendered correctly</td><td style=text-align:left>Bug</td></tr><tr><td style=text-align:left>PSDJAVA-280</td><td style=text-align:left>Support of Embedded Smart objects</td><td style=text-align:left>Feature</td></tr><tr><td style=text-align:left>PSDJAVA-282</td><td style=text-align:left>Support of SoLEResource (Smart Object Layer External resource)</td><td style=text-align:left>Feature</td></tr></tbody></table><h1 id=public-api-changes><strong>Public API Changes</strong></h1><h1 id=added-apis><strong>Added APIs:</strong></h1><ul><li>F:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLeResource.TypeToolKey</li><li>F:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectType.AvailableLinked</li><li>F:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectType.Embedded</li><li>F:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectType.LibraryLink</li><li>F:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectType.UnavailableLinked</li><li>F:com.aspose.psd.fileformats.psd.layers.text.rendering.AutoKerning.Manual</li><li>F:com.aspose.psd.fileformats.psd.layers.text.rendering.AutoKerning.Metric</li><li>F:com.aspose.psd.fileformats.psd.layers.text.rendering.AutoKerning.Optical</li><li>M:com.aspose.psd.fileformats.psd.PsdImage.getSmartObjectProvider</li><li>M:com.aspose.psd.fileformats.psd.SmartObjectProvider.embedAllLinked</li><li>M:com.aspose.psd.fileformats.psd.SmartObjectProvider.setDataSource(com.aspose.psd.fileformats.psd.layers.layerresources.linkresources.LinkDataSource)</li><li>M:com.aspose.psd.fileformats.psd.SmartObjectProvider.updateAllModifiedContent</li><li>M:com.aspose.psd.fileformats.psd.layers.TextLayer.setTextBoundBox(com.aspose.psd.RectangleF)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.Txt2Resource.addTextRecord(java.lang.String,com.aspose.psd.RectangleF)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.linkresources.LinkResource.get_Item(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.linkresources.LinkResource.get_Item(java.util.UUID)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.ISmartObjectLayerResource.getPlacedId</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.ISmartObjectLayerResource.setPlacedId(java.util.UUID)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getAntiAliasPolicy</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getBottom</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getBounds</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getHorizontalMeshPointUnit</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getHorizontalMeshPoints</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getItems</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getLeft</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getPageNumber</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getPerspective</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getPerspectiveOther</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getPlacedLayerType</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getRight</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getSignature</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getTop</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getTotalPages</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getTransformMatrix</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getUOrder</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getUniqueId</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getVOrder</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getValue</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getVersion</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getVerticalMeshPointUnit</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.getVerticalMeshPoints</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.get_Item(java.lang.String)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.isCustom</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setAntiAliasPolicy(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setBottom(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setBounds(com.aspose.psd.Rectangle)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setCustom(boolean)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setHorizontalMeshPointUnit(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setHorizontalMeshPoints(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setItems(com.aspose.psd.fileformats.psd.layers.layerresources.OSTypeStructure[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setLeft(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setPageNumber(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setPerspective(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setPerspectiveOther(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setPlacedLayerType(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setRight(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setTop(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setTotalPages(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setTransformMatrix(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setUOrder(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setUniqueId(java.util.UUID)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setVOrder(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setValue(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setVersion(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setVerticalMeshPointUnit(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource.setVerticalMeshPoints(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getAntiAliasPolicy</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getComp</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getCompId</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getCrop</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getDurationDenominator</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getDurationNumerator</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getFrameCount</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getFrameStepDenominator</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getFrameStepNumerator</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getHeight</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getItems</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getLength</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getNonAffineTransformMatrix</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getOriginalCompId</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getPageNumber</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getPlacedId</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getPlacedLayerType</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getPsdVersion</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getResolution</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getResolutionUnit</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getSignature</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getTotalPages</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getTransformMatrix</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getUniqueId</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.getWidth</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.save(com.aspose.psd.StreamContainer,int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setAntiAliasPolicy(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setComp(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setCompId(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setCrop(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setDurationDenominator(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setDurationNumerator(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setFrameCount(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setFrameStepDenominator(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setFrameStepNumerator(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setHeight(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setItems(com.aspose.psd.fileformats.psd.layers.layerresources.OSTypeStructure[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setNonAffineTransformMatrix(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setPageNumber(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setPlacedId(java.util.UUID)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setPlacedLayerType(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setResolution(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setResolutionUnit(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setTotalPages(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setTransformMatrix(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setUniqueId(java.util.UUID)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource.setWidth(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartResourceCreator.#ctor</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartResourceCreator.#ctor(boolean,boolean)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartResourceCreator.#ctor(com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartResourceCreator.generatePlacedResource</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartResourceCreator.generateSmartEmbeddedResource</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartResourceCreator.generateSmartExternalResource</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLeResource.#ctor</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLeResource.#ctor(java.util.UUID,boolean,boolean)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLeResource.getKey</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.#ctor(com.aspose.psd.internal.im.k,com.aspose.psd.IColorPalette,com.aspose.psd.internal.hS.D,com.aspose.psd.fileformats.psd.layers.LayerResource[])</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.convertToLinked(java.lang.String)</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.embedLinked</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.exportContents(java.lang.String)</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.getContentType</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.getContents</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.getContentsBounds</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.getContentsSource</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.getSmartObjectProvider</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.loadContents(com.aspose.psd.LoadOptions)</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.relinkToFile(java.lang.String)</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.replaceContents(com.aspose.psd.Image)</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.replaceContents(java.lang.String)</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.setContents(byte[])</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.setContentsBounds(com.aspose.psd.Rectangle)</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.setContentsSource(com.aspose.psd.fileformats.psd.layers.layerresources.linkresources.LinkDataSource)</li><li>M:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer.updateModifiedContent</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.getAutoKerning</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.getContextualAlternates</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.getDiscretionaryLigatures</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.getFractions</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.getHorizontalScale</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.getLanguageIndex</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.getStandardLigatures</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.getVerticalScale</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.setAutoKerning(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.setContextualAlternates(boolean)</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.setDiscretionaryLigatures(boolean)</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.setFractions(boolean)</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.setHorizontalScale(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.setStandardLigatures(boolean)</li><li>M:com.aspose.psd.fileformats.psd.layers.text.ITextStyle.setVerticalScale(double)</li><li>T:com.aspose.psd.fileformats.psd.SmartObjectProvider</li><li>T:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.ISmartObjectLayerResource</li><li>T:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlacedResource</li><li>T:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartObjectResource</li><li>T:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SmartResourceCreator</li><li>T:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLeResource</li><li>T:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectLayer</li><li>T:com.aspose.psd.fileformats.psd.layers.smartobjects.SmartObjectType</li><li>T:com.aspose.psd.fileformats.psd.layers.text.rendering.AutoKerning</li></ul><h2 id=removed-apis><strong>Removed APIs:</strong></h2><ul><li>F:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.AntiAliasPolicyKey</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.Txt2Resource.addTextRecord(java.lang.String)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.#ctor(java.util.UUID,boolean)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getAntiAliasPolicy</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getBottom</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getBounds</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getHorizontalMeshPointUnit</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getHorizontalMeshPoints</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getItems</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getLeft</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getPageNumber</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getPerspective</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getPerspectiveOther</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getPlacedLayerType</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getRight</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getTop</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getTotalPages</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getTransformMatrix</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getUOrder</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getUniqueId</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getVOrder</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getValue</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getVersion</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getVerticalMeshPointUnit</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.getVerticalMeshPoints</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.get_Item(java.lang.String)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.isCustom</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setAntiAliasPolicy(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setBottom(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setBounds(com.aspose.psd.Rectangle)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setCustom(boolean)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setHorizontalMeshPointUnit(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setHorizontalMeshPoints(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setItems(com.aspose.psd.fileformats.psd.layers.layerresources.OSTypeStructure[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setLeft(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setPageNumber(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setPerspective(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setPerspectiveOther(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setPlacedLayerType(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setRight(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setTop(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setTotalPages(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setTransformMatrix(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setUOrder(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setUniqueId(java.util.UUID)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setVOrder(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setValue(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setVersion(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setVerticalMeshPointUnit(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.PlLdResource.setVerticalMeshPoints(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getAntiAliasPolicy</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getBottom</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getBounds</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getComp</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getCompId</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getCrop</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getDurationDenominator</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getDurationNumerator</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getFrameCount</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getFrameStepDenominator</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getFrameStepNumerator</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getHeight</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getHorizontalMeshPointUnit</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getHorizontalMeshPoints</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getItems</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getLeft</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getLength</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getNonAffineTransformMatrix</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getOriginalCompId</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getPageNumber</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getPerspective</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getPerspectiveOther</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getPlacedId</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getPlacedLayerType</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getPsdVersion</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getResolution</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getResolutionUnit</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getRight</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getSignature</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getTop</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getTotalPages</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getTransformMatrix</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getUOrder</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getUniqueId</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getVOrder</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getValue</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getVersion</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getVerticalMeshPointUnit</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getVerticalMeshPoints</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.getWidth</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.isCustom</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.save(com.aspose.psd.StreamContainer,int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setAntiAliasPolicy(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setBottom(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setBounds(com.aspose.psd.Rectangle)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setComp(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setCompId(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setCrop(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setCustom(boolean)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setDurationDenominator(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setDurationNumerator(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setFrameCount(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setFrameStepDenominator(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setFrameStepNumerator(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setHeight(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setHorizontalMeshPointUnit(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setHorizontalMeshPoints(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setItems(com.aspose.psd.fileformats.psd.layers.layerresources.OSTypeStructure[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setLeft(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setNonAffineTransformMatrix(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setOriginalCompId(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setPageNumber(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setPerspective(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setPerspectiveOther(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setPlacedId(java.util.UUID)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setPlacedLayerType(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setResolution(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setResolutionUnit(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setRight(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setTop(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setTotalPages(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setTransformMatrix(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setUOrder(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setUniqueId(java.util.UUID)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setVOrder(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setValue(double)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setVersion(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setVerticalMeshPointUnit(int)</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setVerticalMeshPoints(double[])</li><li>M:com.aspose.psd.fileformats.psd.layers.layerresources.smartobjectresources.SoLdResource.setWidth(double)</li></ul><h1 id=usage-examples><strong>Usage examples:</strong></h1><p><strong>PSDJAVA-272. In a specific PSD file, resizing TextLayer breaks the location value</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// This is a complex example because it contains a few sub-examples. All these sub-examples
</span></span></span><span style=display:flex><span><span style=color:#75715e>// demonstrate usage of linked smart objects and their APIs.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LocalScopeExtension</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>Object a<span style=color:#f92672>,</span> Object b<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>(</span>a <span style=color:#f92672>==</span> b<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#f92672>(</span>a <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>b<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>Object actual<span style=color:#f92672>,</span> Object expected<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>boolean</span> areEqual <span style=color:#f92672>=</span> equals<span style=color:#f92672>(</span>actual<span style=color:#f92672>,</span> expected<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Compare arrays if any
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>areEqual <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>(</span>actual <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> actual<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>isArray</span><span style=color:#f92672>())</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>(</span>expected <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> expected<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>isArray</span><span style=color:#f92672>()))</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> length<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Use Reflection for accessing arrays to support arrays of primitives
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>length <span style=color:#f92672>=</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>getLength</span><span style=color:#f92672>(</span>actual<span style=color:#f92672>))</span> <span style=color:#f92672>==</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>getLength</span><span style=color:#f92672>(</span>expected<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> length<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>equals<span style=color:#f92672>(</span>Array<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>actual<span style=color:#f92672>,</span> i<span style=color:#f92672>),</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>expected<span style=color:#f92672>,</span> i<span style=color:#f92672>)))</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                areEqual <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>areEqual<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> FormatException<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                    String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Actual value %s are not equal to expected %s.&#34;</span><span style=color:#f92672>,</span> actual<span style=color:#f92672>,</span> expected<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>exampleOfUpdatingSmartObjectLayer</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>            String filePath<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> contentsLength<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> left<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> top<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> right<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> bottom<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>long</span> format<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// This example demonstrates how to change the smart object layer in the PSD file and export / update its contents.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> String fileName <span style=color:#f92672>=</span> getFileNameWithoutExtension<span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String pngOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_modified.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String png2OutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_updated_modified.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String psd2OutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_updated_modified.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String exportPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_exported.&#34;</span> <span style=color:#f92672>+</span> getFormatExt<span style=color:#f92672>(</span>format<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Verify the content length and the layer bounds
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> contentType <span style=color:#f92672>=</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>contentType <span style=color:#f92672>==</span> SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>AvailableLinked</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// Let&#39;s export the external smart object image from the PSD smart object layer to a new location
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#75715e>// because we are going to modify it.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>exportContents</span><span style=color:#f92672>(</span>exportPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>relinkToFile</span><span style=color:#f92672>(</span>exportPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s invert the content of the smart object: inner (not cached) image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            RasterImage innerImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>loadContents</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> LoadOptions<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                invertImage<span style=color:#f92672>(</span>innerImage<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                ByteArrayOutputStream stream <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ByteArrayOutputStream<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>stream<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                    smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>setContents</span><span style=color:#f92672>(</span>stream<span style=color:#f92672>.</span><span style=color:#a6e22e>toByteArray</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        stream<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check whether the modified content does not affect rendering yet.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>pngOutputPath<span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>updateModifiedContent</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check whether the updated content affects rendering and the psd image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>psd2OutputPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            PngOptions pngOptions1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions1<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>png2OutputPath<span style=color:#f92672>,</span> pngOptions1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>            String filePath<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> contentsLength<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> left<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> top<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> right<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> bottom<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>long</span> format<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// This demonstrates how to convert an embedded smart object layer in the PSD file to external one.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        String formatExt <span style=color:#f92672>=</span> getFormatExt<span style=color:#f92672>(</span>format<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String fileName <span style=color:#f92672>=</span> getFileNameWithoutExtension<span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String pngOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_to_external.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String psdOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_to_external.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String externalPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_external.&#34;</span> <span style=color:#f92672>+</span> formatExt<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>convertToLinked</span><span style=color:#f92672>(</span>externalPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>AvailableLinked</span><span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check if the converted image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>psdOutputPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>pngOutputPath<span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image1 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>psdOutputPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image1<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>AvailableLinked</span><span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image1<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>exampleOfLinkedSmartObjectLayerToEmbeddedConversion</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>            String filePath<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> contentsLength<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> left<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> top<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> right<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> bottom<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>long</span> format<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String fileName <span style=color:#f92672>=</span> getFileNameWithoutExtension<span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String pngOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_to_embedded.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String psdOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_to_embedded.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer0 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>embedLinked</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;=</span> 2<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                SmartObjectLayer smartObjectLayer1 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>1<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>                assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>Embedded</span><span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>                assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>AvailableLinked</span><span style=color:#f92672>,</span> smartObjectLayer1<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                image<span style=color:#f92672>.</span><span style=color:#a6e22e>getSmartObjectProvider</span><span style=color:#f92672>().</span><span style=color:#a6e22e>embedAllLinked</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Layer layer <span style=color:#f92672>:</span> image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    SmartObjectLayer smartLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>layer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>smartLayer <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>Embedded</span><span style=color:#f92672>,</span> smartLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check if the converted image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>psdOutputPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>pngOutputPath<span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image1 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>psdOutputPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image1<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>Embedded</span><span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image1<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>exampleOfExternalSmartObjectLayerSupport</span><span style=color:#f92672>(</span>String filePath<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> contentsLength<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> left<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> top<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> right<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> bottom<span style=color:#f92672>,</span> <span style=color:#66d9ef>long</span> format<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String formatExt <span style=color:#f92672>=</span> getFormatExt<span style=color:#f92672>(</span>format<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String fileName <span style=color:#f92672>=</span> getFileNameWithoutExtension<span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String pngOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String psdOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String linkOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_inverted.&#34;</span> <span style=color:#f92672>+</span> formatExt<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String png2OutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_updated.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String psd2OutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_updated.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String exportPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_export.&#34;</span> <span style=color:#f92672>+</span> formatExt<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> 1<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>AvailableLinked</span><span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s export the linked smart object image from the PSD smart object layer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>exportContents</span><span style=color:#f92672>(</span>exportPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check if the original image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>psdOutputPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>pngOutputPath<span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            RasterImage innerImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>loadContents</span><span style=color:#f92672>(</span><span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                assertAreEqual<span style=color:#f92672>(</span>format<span style=color:#f92672>,</span> innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getFileFormat</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// Let&#39;s invert the linked smart object image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                invertImage<span style=color:#f92672>(</span>innerImage<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>linkOutputPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// Let&#39;s replace the linked smart object image in the PSD layer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceContents</span><span style=color:#f92672>(</span>linkOutputPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check if the updated image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>psd2OutputPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            PngOptions pngOptions1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions1<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>png2OutputPath<span style=color:#f92672>,</span> pngOptions1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Inverts the image.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>invertImage</span><span style=color:#f92672>(</span>RasterImage innerImage<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>innerImage <span style=color:#66d9ef>instanceof</span> PsdImage<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            PsdImage innerPsdImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>innerImage<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            invertRasterImage<span style=color:#f92672>(</span>innerPsdImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            invertRasterImage<span style=color:#f92672>(</span>innerImage<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Inverts the raster image.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>invertRasterImage</span><span style=color:#f92672>(</span>RasterImage innerImage<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> pixels <span style=color:#f92672>=</span> innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>loadArgb32Pixels</span><span style=color:#f92672>(</span>innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getBounds</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> pixels<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> pixel <span style=color:#f92672>=</span> pixels<span style=color:#f92672>[</span>i<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> alpha <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)(</span>pixel <span style=color:#f92672>&amp;</span> 0xff000000<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            pixels<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(~(</span>pixel <span style=color:#f92672>&amp;</span> 0x00ffffff<span style=color:#f92672>))</span> <span style=color:#f92672>|</span> alpha<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>saveArgb32Pixels</span><span style=color:#f92672>(</span>innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getBounds</span><span style=color:#f92672>(),</span> pixels<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Gets the format extension.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    String <span style=color:#a6e22e>getFormatExt</span><span style=color:#f92672>(</span><span style=color:#66d9ef>long</span> format<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String formatExt <span style=color:#f92672>=</span> format <span style=color:#f92672>==</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Jpeg2000</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;jpf&#34;</span> <span style=color:#f92672>:</span> Enum<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(</span>FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> format<span style=color:#f92672>).</span><span style=color:#a6e22e>toLowerCase</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> formatExt<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    String <span style=color:#a6e22e>getFileNameWithoutExtension</span><span style=color:#f92672>(</span>String filePath<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>filePath<span style=color:#f92672>).</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>().</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\\.&#34;</span><span style=color:#f92672>)[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>LocalScopeExtension $ <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LocalScopeExtension<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This example demonstrates how to update the external or embedded smart object layer using these methods:
</span></span></span><span style=display:flex><span><span style=color:#75715e>// RelinkToFile, UpdateModifiedContent, ExportContents
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfUpdatingSmartObjectLayer</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rgb8_2x2_linked2.psd&#34;</span><span style=color:#f92672>,</span> 0x53<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfUpdatingSmartObjectLayer</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-png.psd&#34;</span><span style=color:#f92672>,</span> 0x207<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This example demonstrates how to convert the embedded smart object to external linked contents using the ConvertToLinked method.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;new_panama-papers-4.psd&#34;</span><span style=color:#f92672>,</span> 0x10caa<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0x280<span style=color:#f92672>,</span> 0x169<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Jpeg</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r3-embedded.psd&#34;</span><span style=color:#f92672>,</span> 0x207<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-tiff.psd&#34;</span><span style=color:#f92672>,</span> 0xca94<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Tiff</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-bmp.psd&#34;</span><span style=color:#f92672>,</span> 0x278<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Bmp</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-gif.psd&#34;</span><span style=color:#f92672>,</span> 0x3ec<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Gif</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-jpeg.psd&#34;</span><span style=color:#f92672>,</span> 0x327<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Jpeg</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-jpeg2000.psd&#34;</span><span style=color:#f92672>,</span> 0x519f<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Jpeg2000</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-psd.psd&#34;</span><span style=color:#f92672>,</span> 0xc074<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Psd</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-png.psd&#34;</span><span style=color:#f92672>,</span> 0x207<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This example demonstrates how to embed one external smart object layer or all linked layers in the PSD file using the EmbedLinked method.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfLinkedSmartObjectLayerToEmbeddedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rgb8_2x2_linked.psd&#34;</span><span style=color:#f92672>,</span> 0x53<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfLinkedSmartObjectLayerToEmbeddedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rgb8_2x2_linked2.psd&#34;</span><span style=color:#f92672>,</span> 0x53<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This example demonstrates how to change the Adobe® Photoshop® external smart object layer and export / update its contents
</span></span></span><span style=display:flex><span><span style=color:#75715e>// using the ExportContents and ReplaceContents methods.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfExternalSmartObjectLayerSupport</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rgb8_2x2_linked.psd&#34;</span><span style=color:#f92672>,</span> 0x53<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfExternalSmartObjectLayerSupport</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rgb8_2x2_linked2.psd&#34;</span><span style=color:#f92672>,</span> 0x4aea<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 10<span style=color:#f92672>,</span> 10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Psd</span><span style=color:#f92672>);</span></span></span></code></pre></div><p><strong>PSDJAVA-273. Updating text in given PSD file and saving it changes some layer and many text parameters</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// This example demonstrates that only the text property changes when updating text and
</span></span></span><span style=display:flex><span><span style=color:#75715e>// there are no other changes anymore.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LocalScopeExtension</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>Object expected<span style=color:#f92672>,</span> Object actual<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>expected <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span>expected<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>actual<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> FormatException<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                    String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Actual value %s are not equal to expected %s.&#34;</span><span style=color:#f92672>,</span> actual<span style=color:#f92672>,</span> expected<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>LocalScopeExtension $ <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LocalScopeExtension<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>String srcPsdPath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;A.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String dstPsdPath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;output.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Load a predefined PSD file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>PsdImage psdImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>srcPsdPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Find a text layer in the Photoshop document
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    TextLayer textLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>TextLayer<span style=color:#f92672>)</span>psdImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>1<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Update text of the text layer (this action must not update any other layer properties)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    textLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>updateText</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;abc&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Save changes to another PSD file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    psdImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>dstPsdPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    psdImage<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Load the source PSD file again to use as an etalon
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>PsdImage srcImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>srcPsdPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Find text style properties of the etalon text layer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    TextLayer srcTextLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>TextLayer<span style=color:#f92672>)</span>srcImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>1<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>    ITextStyle etalonStyle <span style=color:#f92672>=</span> srcTextLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getTextData</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getItems</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>].</span><span style=color:#a6e22e>getStyle</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Load just saved PSD file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    PsdImage outImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>dstPsdPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Find text style properties of the saved text layer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        TextLayer outTextLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>TextLayer<span style=color:#f92672>)</span>outImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>1<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>        ITextStyle resultStyle <span style=color:#f92672>=</span> outTextLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getTextData</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getItems</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>].</span><span style=color:#a6e22e>getStyle</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Compare text style properties to make sure there were no changes except the text
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getAutoLeading</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getAutoLeading</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getFontIndex</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getFontIndex</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getUnderline</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getUnderline</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getStrikethrough</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getStrikethrough</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getAutoKerning</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getAutoKerning</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getStandardLigatures</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getStandardLigatures</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getDiscretionaryLigatures</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getDiscretionaryLigatures</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getContextualAlternates</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getContextualAlternates</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getLanguageIndex</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getLanguageIndex</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getVerticalScale</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getVerticalScale</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getHorizontalScale</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getHorizontalScale</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>etalonStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getFractions</span><span style=color:#f92672>(),</span> resultStyle<span style=color:#f92672>.</span><span style=color:#a6e22e>getFractions</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        outImage<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    srcImage<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div><p><strong>PSDJAVA-276. Support of Linked Smart objects</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// This is a complex example because it contains a few sub-examples. All these sub-examples
</span></span></span><span style=display:flex><span><span style=color:#75715e>// demonstrate usage of linked smart objects and their APIs.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LocalScopeExtension</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>Object a<span style=color:#f92672>,</span> Object b<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>(</span>a <span style=color:#f92672>==</span> b<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#f92672>(</span>a <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>b<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>Object actual<span style=color:#f92672>,</span> Object expected<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>boolean</span> areEqual <span style=color:#f92672>=</span> equals<span style=color:#f92672>(</span>actual<span style=color:#f92672>,</span> expected<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Compare arrays if any
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>areEqual <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>(</span>actual <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> actual<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>isArray</span><span style=color:#f92672>())</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>(</span>expected <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> expected<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>isArray</span><span style=color:#f92672>()))</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> length<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Use Reflection for accessing arrays to support arrays of primitives
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>length <span style=color:#f92672>=</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>getLength</span><span style=color:#f92672>(</span>actual<span style=color:#f92672>))</span> <span style=color:#f92672>==</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>getLength</span><span style=color:#f92672>(</span>expected<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> length<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>equals<span style=color:#f92672>(</span>Array<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>actual<span style=color:#f92672>,</span> i<span style=color:#f92672>),</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>expected<span style=color:#f92672>,</span> i<span style=color:#f92672>)))</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                areEqual <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>areEqual<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> FormatException<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                    String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Actual value %s are not equal to expected %s.&#34;</span><span style=color:#f92672>,</span> actual<span style=color:#f92672>,</span> expected<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>exampleOfUpdatingSmartObjectLayer</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>            String filePath<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> contentsLength<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> left<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> top<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> right<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> bottom<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>long</span> format<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// This example demonstrates how to change the smart object layer in the PSD file and export / update its contents.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> String fileName <span style=color:#f92672>=</span> getFileNameWithoutExtension<span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String pngOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_modified.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String png2OutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_updated_modified.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String psd2OutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_updated_modified.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String exportPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_exported.&#34;</span> <span style=color:#f92672>+</span> getFormatExt<span style=color:#f92672>(</span>format<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Verify the content length and the layer bounds
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> contentType <span style=color:#f92672>=</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>contentType <span style=color:#f92672>==</span> SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>AvailableLinked</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// Let&#39;s export the external smart object image from the PSD smart object layer to a new location
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#75715e>// because we are going to modify it.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>exportContents</span><span style=color:#f92672>(</span>exportPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>relinkToFile</span><span style=color:#f92672>(</span>exportPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s invert the content of the smart object: inner (not cached) image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            RasterImage innerImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>loadContents</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> LoadOptions<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                invertImage<span style=color:#f92672>(</span>innerImage<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                ByteArrayOutputStream stream <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ByteArrayOutputStream<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>stream<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                    smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>setContents</span><span style=color:#f92672>(</span>stream<span style=color:#f92672>.</span><span style=color:#a6e22e>toByteArray</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        stream<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check whether the modified content does not affect rendering yet.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>pngOutputPath<span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>updateModifiedContent</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check whether the updated content affects rendering and the psd image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>psd2OutputPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            PngOptions pngOptions1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions1<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>png2OutputPath<span style=color:#f92672>,</span> pngOptions1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>            String filePath<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> contentsLength<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> left<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> top<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> right<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> bottom<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>long</span> format<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// This demonstrates how to convert an embedded smart object layer in the PSD file to external one.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        String formatExt <span style=color:#f92672>=</span> getFormatExt<span style=color:#f92672>(</span>format<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String fileName <span style=color:#f92672>=</span> getFileNameWithoutExtension<span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String pngOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_to_external.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String psdOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_to_external.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String externalPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_external.&#34;</span> <span style=color:#f92672>+</span> formatExt<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>convertToLinked</span><span style=color:#f92672>(</span>externalPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>AvailableLinked</span><span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check if the converted image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>psdOutputPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>pngOutputPath<span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image1 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>psdOutputPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image1<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>AvailableLinked</span><span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image1<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>exampleOfLinkedSmartObjectLayerToEmbeddedConversion</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>            String filePath<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> contentsLength<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> left<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> top<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> right<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> bottom<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>long</span> format<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String fileName <span style=color:#f92672>=</span> getFileNameWithoutExtension<span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String pngOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_to_embedded.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String psdOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_to_embedded.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer0 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>embedLinked</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;=</span> 2<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                SmartObjectLayer smartObjectLayer1 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>1<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>                assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>Embedded</span><span style=color:#f92672>,</span> smartObjectLayer0<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>                assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>AvailableLinked</span><span style=color:#f92672>,</span> smartObjectLayer1<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                image<span style=color:#f92672>.</span><span style=color:#a6e22e>getSmartObjectProvider</span><span style=color:#f92672>().</span><span style=color:#a6e22e>embedAllLinked</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Layer layer <span style=color:#f92672>:</span> image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    SmartObjectLayer smartLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>layer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>smartLayer <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>Embedded</span><span style=color:#f92672>,</span> smartLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check if the converted image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>psdOutputPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>pngOutputPath<span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image1 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>psdOutputPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image1<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>Embedded</span><span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image1<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>exampleOfExternalSmartObjectLayerSupport</span><span style=color:#f92672>(</span>String filePath<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> contentsLength<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> left<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> top<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> right<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> bottom<span style=color:#f92672>,</span> <span style=color:#66d9ef>long</span> format<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String formatExt <span style=color:#f92672>=</span> getFormatExt<span style=color:#f92672>(</span>format<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String fileName <span style=color:#f92672>=</span> getFileNameWithoutExtension<span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String pngOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String psdOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String linkOutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_inverted.&#34;</span> <span style=color:#f92672>+</span> formatExt<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String png2OutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_updated.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String psd2OutputPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_updated.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String exportPath <span style=color:#f92672>=</span> fileName <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_export.&#34;</span> <span style=color:#f92672>+</span> formatExt<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        PsdImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>filePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            SmartObjectLayer smartObjectLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> 1<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>contentsLength<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContents</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>SmartObjectType<span style=color:#f92672>.</span><span style=color:#a6e22e>AvailableLinked</span><span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s export the linked smart object image from the PSD smart object layer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>exportContents</span><span style=color:#f92672>(</span>exportPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check if the original image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>psdOutputPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>pngOutputPath<span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            RasterImage innerImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>loadContents</span><span style=color:#f92672>(</span><span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                assertAreEqual<span style=color:#f92672>(</span>format<span style=color:#f92672>,</span> innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getFileFormat</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// Let&#39;s invert the linked smart object image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                invertImage<span style=color:#f92672>(</span>innerImage<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>linkOutputPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// Let&#39;s replace the linked smart object image in the PSD layer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceContents</span><span style=color:#f92672>(</span>linkOutputPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Let&#39;s check if the updated image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>psd2OutputPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            PngOptions pngOptions1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            pngOptions1<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>png2OutputPath<span style=color:#f92672>,</span> pngOptions1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Inverts the image.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>invertImage</span><span style=color:#f92672>(</span>RasterImage innerImage<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>innerImage <span style=color:#66d9ef>instanceof</span> PsdImage<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            PsdImage innerPsdImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>innerImage<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            invertRasterImage<span style=color:#f92672>(</span>innerPsdImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            invertRasterImage<span style=color:#f92672>(</span>innerImage<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Inverts the raster image.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>invertRasterImage</span><span style=color:#f92672>(</span>RasterImage innerImage<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> pixels <span style=color:#f92672>=</span> innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>loadArgb32Pixels</span><span style=color:#f92672>(</span>innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getBounds</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> pixels<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> pixel <span style=color:#f92672>=</span> pixels<span style=color:#f92672>[</span>i<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> alpha <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)(</span>pixel <span style=color:#f92672>&amp;</span> 0xff000000<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            pixels<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(~(</span>pixel <span style=color:#f92672>&amp;</span> 0x00ffffff<span style=color:#f92672>))</span> <span style=color:#f92672>|</span> alpha<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>saveArgb32Pixels</span><span style=color:#f92672>(</span>innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getBounds</span><span style=color:#f92672>(),</span> pixels<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Gets the format extension.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    String <span style=color:#a6e22e>getFormatExt</span><span style=color:#f92672>(</span><span style=color:#66d9ef>long</span> format<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String formatExt <span style=color:#f92672>=</span> format <span style=color:#f92672>==</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Jpeg2000</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;jpf&#34;</span> <span style=color:#f92672>:</span> Enum<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(</span>FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> format<span style=color:#f92672>).</span><span style=color:#a6e22e>toLowerCase</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> formatExt<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    String <span style=color:#a6e22e>getFileNameWithoutExtension</span><span style=color:#f92672>(</span>String filePath<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>filePath<span style=color:#f92672>).</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>().</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\\.&#34;</span><span style=color:#f92672>)[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>LocalScopeExtension $ <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LocalScopeExtension<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This example demonstrates how to update the external or embedded smart object layer using these methods:
</span></span></span><span style=display:flex><span><span style=color:#75715e>// RelinkToFile, UpdateModifiedContent, ExportContents
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfUpdatingSmartObjectLayer</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rgb8_2x2_linked2.psd&#34;</span><span style=color:#f92672>,</span> 0x53<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfUpdatingSmartObjectLayer</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-png.psd&#34;</span><span style=color:#f92672>,</span> 0x207<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This example demonstrates how to convert the embedded smart object to external linked contents using the ConvertToLinked method.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;new_panama-papers-4.psd&#34;</span><span style=color:#f92672>,</span> 0x10caa<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0x280<span style=color:#f92672>,</span> 0x169<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Jpeg</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r3-embedded.psd&#34;</span><span style=color:#f92672>,</span> 0x207<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-tiff.psd&#34;</span><span style=color:#f92672>,</span> 0xca94<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Tiff</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-bmp.psd&#34;</span><span style=color:#f92672>,</span> 0x278<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Bmp</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-gif.psd&#34;</span><span style=color:#f92672>,</span> 0x3ec<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Gif</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-jpeg.psd&#34;</span><span style=color:#f92672>,</span> 0x327<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Jpeg</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-jpeg2000.psd&#34;</span><span style=color:#f92672>,</span> 0x519f<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Jpeg2000</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-psd.psd&#34;</span><span style=color:#f92672>,</span> 0xc074<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Psd</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfEmbeddedSmartObjectLayerToLinkedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;r-embedded-png.psd&#34;</span><span style=color:#f92672>,</span> 0x207<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0xb<span style=color:#f92672>,</span> 0x10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This example demonstrates how to embed one external smart object layer or all linked layers in the PSD file using the EmbedLinked method.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfLinkedSmartObjectLayerToEmbeddedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rgb8_2x2_linked.psd&#34;</span><span style=color:#f92672>,</span> 0x53<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfLinkedSmartObjectLayerToEmbeddedConversion</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rgb8_2x2_linked2.psd&#34;</span><span style=color:#f92672>,</span> 0x53<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This example demonstrates how to change the Adobe® Photoshop® external smart object layer and export / update its contents
</span></span></span><span style=display:flex><span><span style=color:#75715e>// using the ExportContents and ReplaceContents methods.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfExternalSmartObjectLayerSupport</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rgb8_2x2_linked.psd&#34;</span><span style=color:#f92672>,</span> 0x53<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>$<span style=color:#f92672>.</span><span style=color:#a6e22e>exampleOfExternalSmartObjectLayerSupport</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rgb8_2x2_linked2.psd&#34;</span><span style=color:#f92672>,</span> 0x4aea<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 10<span style=color:#f92672>,</span> 10<span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Psd</span><span style=color:#f92672>);</span></span></span></code></pre></div><p><strong>PSDJAVA-278. Regression: Aspose.PSD 20.8.0 can’t open file</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// This example does nothing meaningful but shows that there is no bug when opening
</span></span></span><span style=display:flex><span><span style=color:#75715e>// a specific PSD file.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>String srcPsdPath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;sample2.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>PsdImage psdImage <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Try to load a specific PSD file (it must not throw any exception here)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    psdImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>srcPsdPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>psdImage <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> psdImage<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div><p><strong>PSDJAVA-279. FillLayer are not updated after the creation and can not be rendered correctly</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// This example shows that the fill layer is updated after calling the update method
</span></span></span><span style=display:flex><span><span style=color:#75715e>// and it renders correctly as well.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>String srcPsdFile <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;TestSimple.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String dstPngPath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;output.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Load a PSD containing fill layer(s)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>PsdImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>srcPsdFile<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Layer layer <span style=color:#f92672>=</span> image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>i<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>layer <span style=color:#66d9ef>instanceof</span> FillLayer<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            FillLayer fillLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>FillLayer<span style=color:#f92672>)</span>layer<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Update the fill layer to check that it is updatable after creation
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            fillLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>update</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Save the changes to a PSD file for further verification
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>dstPngPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div><p><strong>PSDJAVA-280. Support of Embedded Smart objects</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// This example demonstrates how to change the smart object layer in the PSD file and
</span></span></span><span style=display:flex><span><span style=color:#75715e>// export / update smart object original embedded contents.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LocalScopeExtension</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>Object actual<span style=color:#f92672>,</span> Object expected<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>actual <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span>actual<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>expected<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> FormatException<span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Actual value %s are not equal to expected %s.&#34;</span><span style=color:#f92672>,</span> actual<span style=color:#f92672>,</span> expected<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>LocalScopeExtension $ <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LocalScopeExtension<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> left <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> top <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> right <span style=color:#f92672>=</span> 0xb<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> bottom <span style=color:#f92672>=</span> 0x10<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>long</span><span style=color:#f92672>[]</span> formats <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>long</span><span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Png</span><span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Psd</span><span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Bmp</span><span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Jpeg</span><span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Gif</span><span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Tiff</span><span style=color:#f92672>,</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Jpeg2000</span>
</span></span><span style=display:flex><span><span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>long</span> format <span style=color:#f92672>:</span> formats<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Resolve suitable text representation of the file format extension
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    String sFileFormat <span style=color:#f92672>=</span> Enum<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(</span>FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> format<span style=color:#f92672>).</span><span style=color:#a6e22e>toLowerCase</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    String fileFormatExt <span style=color:#f92672>=</span> format <span style=color:#f92672>==</span> FileFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Jpeg2000</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;jpf&#34;</span> <span style=color:#f92672>:</span> sFileFormat<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Build paths
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    String filename <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;r-embedded-&#34;</span> <span style=color:#f92672>+</span> sFileFormat<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    String srcPsdPath <span style=color:#f92672>=</span> filename <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    String dstPngPath <span style=color:#f92672>=</span> filename <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_output.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    String dstPsdPath <span style=color:#f92672>=</span> filename <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_output.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    String dstPngPath1 <span style=color:#f92672>=</span> filename <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_updated.png&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    String dstPsdPath1 <span style=color:#f92672>=</span> filename <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_updated.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    String exportPath <span style=color:#f92672>=</span> filename <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;_export.&#34;</span> <span style=color:#f92672>+</span> fileFormatExt<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Load a predefined PSD file containing a smart object
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    PsdImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>srcPsdPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Find a smart object layer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        SmartObjectLayer smartObjectLayer <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SmartObjectLayer<span style=color:#f92672>)</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>()[</span>0<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Verify its position
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>left<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>top<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>right<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>bottom<span style=color:#f92672>,</span> smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getContentsBounds</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Export the embedded smart object image into appropriate file format
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>exportContents</span><span style=color:#f92672>(</span>exportPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Check if the original image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>dstPsdPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        PngOptions pngOptions <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        pngOptions<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>dstPngPath<span style=color:#f92672>,</span> pngOptions<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Load smart object as a raster image
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        RasterImage innerImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>RasterImage<span style=color:#f92672>)</span>smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>loadContents</span><span style=color:#f92672>(</span><span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>format<span style=color:#f92672>,</span> innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getFileFormat</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Load raster image pixels and invert them
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> pixels <span style=color:#f92672>=</span> innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>loadArgb32Pixels</span><span style=color:#f92672>(</span>innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getBounds</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> pixels<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>int</span> pixel <span style=color:#f92672>=</span> pixels<span style=color:#f92672>[</span>i<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>int</span> alpha <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)(</span>pixel <span style=color:#f92672>&amp;</span> 0xff000000<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                pixels<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(~(</span>pixel <span style=color:#f92672>&amp;</span> 0x00ffffff<span style=color:#f92672>))</span> <span style=color:#f92672>|</span> alpha<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Replace original pixels with inverted ones
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>saveArgb32Pixels</span><span style=color:#f92672>(</span>innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>getBounds</span><span style=color:#f92672>(),</span> pixels<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Replace the original smart object image with inverted one
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            smartObjectLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceContents</span><span style=color:#f92672>(</span>innerImage<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            innerImage<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Check if the updated image is saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>dstPsdPath1<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        PngOptions pngOptions1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PngOptions<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        pngOptions1<span style=color:#f92672>.</span><span style=color:#a6e22e>setColorType</span><span style=color:#f92672>(</span>PngColorType<span style=color:#f92672>.</span><span style=color:#a6e22e>TruecolorWithAlpha</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>dstPngPath1<span style=color:#f92672>,</span> pngOptions1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        image<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div><p><strong>PSDJAVA-282. Support of SoLEResource (Smart Object Layer External resource)</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// This example demonstrates API usage of SoLEResource and proves that reading and writing
</span></span></span><span style=display:flex><span><span style=color:#75715e>// SoLEResources works as expected so the resource is supported.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LocalScopeExtension</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>assertIsTrue</span><span style=color:#f92672>(</span><span style=color:#66d9ef>boolean</span> condition<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>condition<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> FormatException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Expected true&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>Object a<span style=color:#f92672>,</span> Object b<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>(</span>a <span style=color:#f92672>==</span> b<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#f92672>(</span>a <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> a<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>b<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>Object actual<span style=color:#f92672>,</span> Object expected<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>boolean</span> areEqual <span style=color:#f92672>=</span> equals<span style=color:#f92672>(</span>actual<span style=color:#f92672>,</span> expected<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Compare arrays if any
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>areEqual <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>(</span>actual <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> actual<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>isArray</span><span style=color:#f92672>())</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>(</span>expected <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> expected<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>isArray</span><span style=color:#f92672>()))</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> length<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Use Reflection for accessing arrays to support arrays of primitives
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>length <span style=color:#f92672>=</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>getLength</span><span style=color:#f92672>(</span>actual<span style=color:#f92672>))</span> <span style=color:#f92672>==</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>getLength</span><span style=color:#f92672>(</span>expected<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> length<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>equals<span style=color:#f92672>(</span>Array<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>actual<span style=color:#f92672>,</span> i<span style=color:#f92672>),</span> Array<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>expected<span style=color:#f92672>,</span> i<span style=color:#f92672>)))</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                areEqual <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>areEqual<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> FormatException<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                    String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Actual value %s are not equal to expected %s.&#34;</span><span style=color:#f92672>,</span> actual<span style=color:#f92672>,</span> expected<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>checkSmartObjectResourceValues</span><span style=color:#f92672>(</span>Object<span style=color:#f92672>[]</span> expectedValue<span style=color:#f92672>,</span> SmartObjectResource resource<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>0<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>isCustom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>2<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getPageNumber</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>3<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getTotalPages</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>4<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getAntiAliasPolicy</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>5<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getPlacedLayerType</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>8<span style=color:#f92672>,</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getTransformMatrix</span><span style=color:#f92672>().</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>6<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getTransformMatrix</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>7<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getValue</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>8<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getPerspective</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>9<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getPerspectiveOther</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>10<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getTop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>11<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getLeft</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>12<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getBottom</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>13<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getRight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>14<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getUOrder</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>15<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getVOrder</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>16<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getCrop</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>17<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getFrameStepNumerator</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>18<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getFrameStepDenominator</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>19<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getDurationNumerator</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>20<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getDurationDenominator</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>21<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getFrameCount</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>22<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getWidth</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>23<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeight</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>24<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getResolution</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>25<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getResolutionUnit</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>26<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getComp</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>27<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getCompId</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>28<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getOriginalCompId</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>29<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getPlacedId</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>30<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getNonAffineTransformMatrix</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>resource<span style=color:#f92672>.</span><span style=color:#a6e22e>isCustom</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>31<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getHorizontalMeshPointUnit</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>32<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getHorizontalMeshPoints</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>33<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getVerticalMeshPointUnit</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            assertAreEqual<span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>34<span style=color:#f92672>],</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getVerticalMeshPoints</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setNewSmartValues</span><span style=color:#f92672>(</span>SmartObjectResource resource<span style=color:#f92672>,</span> Object<span style=color:#f92672>[]</span> newValues<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// This values we do not change in resource
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        newValues<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>isCustom</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        newValues<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getUniqueId</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        newValues<span style=color:#f92672>[</span>5<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getPlacedLayerType</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        newValues<span style=color:#f92672>[</span>14<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getUOrder</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        newValues<span style=color:#f92672>[</span>15<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getVOrder</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        newValues<span style=color:#f92672>[</span>28<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> resource<span style=color:#f92672>.</span><span style=color:#a6e22e>getOriginalCompId</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// This values should be changed in the PlLdResource (with the specified UniqueId) as well
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// and some of them must be in accord with the underlining smart object in the LinkDataSource
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setPageNumber</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>2<span style=color:#f92672>]);</span> <span style=color:#75715e>// 2;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setTotalPages</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>3<span style=color:#f92672>]);</span> <span style=color:#75715e>// 3;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setAntiAliasPolicy</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>4<span style=color:#f92672>]);</span> <span style=color:#75715e>// 0;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setTransformMatrix</span><span style=color:#f92672>((</span><span style=color:#66d9ef>double</span><span style=color:#f92672>[])</span>newValues<span style=color:#f92672>[</span>6<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setValue</span><span style=color:#f92672>((</span>Double<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>7<span style=color:#f92672>]);</span> <span style=color:#75715e>// 1.23456789;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setPerspective</span><span style=color:#f92672>((</span>Double<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>8<span style=color:#f92672>]);</span> <span style=color:#75715e>// 0.123456789;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setPerspectiveOther</span><span style=color:#f92672>((</span>Double<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>9<span style=color:#f92672>]);</span> <span style=color:#75715e>// 0.987654321;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setTop</span><span style=color:#f92672>((</span>Double<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>10<span style=color:#f92672>]);</span> <span style=color:#75715e>// -126;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setLeft</span><span style=color:#f92672>((</span>Double<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>11<span style=color:#f92672>]);</span> <span style=color:#75715e>// -215;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setBottom</span><span style=color:#f92672>((</span>Double<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>12<span style=color:#f92672>]);</span> <span style=color:#75715e>// 248;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setRight</span><span style=color:#f92672>((</span>Double<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>13<span style=color:#f92672>]);</span> <span style=color:#75715e>// 145;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setCrop</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>16<span style=color:#f92672>]);</span> <span style=color:#75715e>// 5;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setFrameStepNumerator</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>17<span style=color:#f92672>]);</span> <span style=color:#75715e>// 1;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setFrameStepDenominator</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>18<span style=color:#f92672>]);</span> <span style=color:#75715e>// 601;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setDurationNumerator</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>19<span style=color:#f92672>]);</span> <span style=color:#75715e>// 2;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setDurationDenominator</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>20<span style=color:#f92672>]);</span> <span style=color:#75715e>// 602;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setFrameCount</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>21<span style=color:#f92672>]);</span> <span style=color:#75715e>// 11;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setWidth</span><span style=color:#f92672>((</span>Double<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>22<span style=color:#f92672>]);</span> <span style=color:#75715e>// 541;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setHeight</span><span style=color:#f92672>((</span>Double<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>23<span style=color:#f92672>]);</span> <span style=color:#75715e>// 249;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setResolution</span><span style=color:#f92672>((</span>Double<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>24<span style=color:#f92672>]);</span> <span style=color:#75715e>// 144;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setResolutionUnit</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>25<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setComp</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>26<span style=color:#f92672>]);</span> <span style=color:#75715e>// 21;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setCompId</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>27<span style=color:#f92672>]);</span> <span style=color:#75715e>// 22;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setNonAffineTransformMatrix</span><span style=color:#f92672>((</span><span style=color:#66d9ef>double</span><span style=color:#f92672>[])</span>newValues<span style=color:#f92672>[</span>30<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// This unique Id should be changed in references if any
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setPlacedId</span><span style=color:#f92672>(</span>UUID<span style=color:#f92672>.</span><span style=color:#a6e22e>fromString</span><span style=color:#f92672>((</span>String<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>29<span style=color:#f92672>]));</span>  <span style=color:#75715e>// &#34;12345678-9abc-def0-9876-54321fecba98&#34;);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>resource<span style=color:#f92672>.</span><span style=color:#a6e22e>isCustom</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setHorizontalMeshPointUnit</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>31<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>            resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setHorizontalMeshPoints</span><span style=color:#f92672>((</span><span style=color:#66d9ef>double</span><span style=color:#f92672>[])</span>newValues<span style=color:#f92672>[</span>32<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>            resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setVerticalMeshPointUnit</span><span style=color:#f92672>((</span>Integer<span style=color:#f92672>)</span>newValues<span style=color:#f92672>[</span>33<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>            resource<span style=color:#f92672>.</span><span style=color:#a6e22e>setVerticalMeshPoints</span><span style=color:#f92672>((</span><span style=color:#66d9ef>double</span><span style=color:#f92672>[])</span>newValues<span style=color:#f92672>[</span>34<span style=color:#f92672>]);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Be careful with some parameters: the saved image may become unreadable by Adobe® Photoshop®
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//resource.setUOrder(6);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//resource.setVOrder(9);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Do no change this otherwise you won&#39;t be able to use free transform
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// or change the underlining smart object to the vector type
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//resource.setPlacedLayerType(PlacedLayerType.Vector);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// There should be valid PlLdResource with this unique Id
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//resource.setUniqueId(UUID.fromString(&#34;98765432-10fe-cba0-1234-56789abcdef0&#34;));
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>LocalScopeExtension $ <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LocalScopeExtension<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Object<span style=color:#f92672>[]</span> newSmartValues <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>null</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                2<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                3<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                0<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                PlacedLayerType<span style=color:#f92672>.</span><span style=color:#a6e22e>ImageStack</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        12<span style=color:#f92672>.</span><span style=color:#a6e22e>937922786050663</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        19<span style=color:#f92672>.</span><span style=color:#a6e22e>419959734187131</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        2<span style=color:#f92672>.</span><span style=color:#a6e22e>85445817782261</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        1<span style=color:#f92672>.</span><span style=color:#a6e22e>0540625423957124</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        7<span style=color:#f92672>.</span><span style=color:#a6e22e>20861031651307</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        14<span style=color:#f92672>.</span><span style=color:#a6e22e>634102808208553</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        17<span style=color:#f92672>.</span><span style=color:#a6e22e>292074924741144</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        4
</span></span><span style=display:flex><span>                <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>                1<span style=color:#f92672>.</span><span style=color:#a6e22e>23456789</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                0<span style=color:#f92672>.</span><span style=color:#a6e22e>123456789</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                0<span style=color:#f92672>.</span><span style=color:#a6e22e>987654321</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>-</span>126d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>-</span>215d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                248d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                145d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                4<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                4<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                5<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                1<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                601<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                2<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                602<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                11<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                541d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                249d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                144d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                UnitTypes<span style=color:#f92672>.</span><span style=color:#a6e22e>Percent</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                21<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                22<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                23<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;12345678-9abc-def0-9876-54321fecba98&#34;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        129<span style=color:#f92672>.</span><span style=color:#a6e22e>937922786050663</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        195<span style=color:#f92672>.</span><span style=color:#a6e22e>419959734187131</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        26<span style=color:#f92672>.</span><span style=color:#a6e22e>85445817782261</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        12<span style=color:#f92672>.</span><span style=color:#a6e22e>0540625423957124</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        72<span style=color:#f92672>.</span><span style=color:#a6e22e>20861031651307</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        147<span style=color:#f92672>.</span><span style=color:#a6e22e>634102808208553</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        175<span style=color:#f92672>.</span><span style=color:#a6e22e>292074924741144</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        42
</span></span><span style=display:flex><span>                <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>                UnitTypes<span style=color:#f92672>.</span><span style=color:#a6e22e>Points</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        0<span style=color:#f92672>.</span><span style=color:#a6e22e>01d</span><span style=color:#f92672>,</span> 103<span style=color:#f92672>.</span><span style=color:#a6e22e>33333333333433d</span><span style=color:#f92672>,</span> 206<span style=color:#f92672>.</span><span style=color:#a6e22e>66686666666666d</span><span style=color:#f92672>,</span> 310<span style=color:#f92672>.</span><span style=color:#a6e22e>02d</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        0<span style=color:#f92672>.</span><span style=color:#a6e22e>20d</span><span style=color:#f92672>,</span> 103<span style=color:#f92672>.</span><span style=color:#a6e22e>33333333333533d</span><span style=color:#f92672>,</span> 206<span style=color:#f92672>.</span><span style=color:#a6e22e>69666666666666d</span><span style=color:#f92672>,</span> 310<span style=color:#f92672>.</span><span style=color:#a6e22e>03d</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        30<span style=color:#f92672>.</span><span style=color:#a6e22e>06d</span><span style=color:#f92672>,</span> 103<span style=color:#f92672>.</span><span style=color:#a6e22e>33333333336333d</span><span style=color:#f92672>,</span> 206<span style=color:#f92672>.</span><span style=color:#a6e22e>66660666666666d</span><span style=color:#f92672>,</span> 310<span style=color:#f92672>.</span><span style=color:#a6e22e>04d</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        04<span style=color:#f92672>.</span><span style=color:#a6e22e>05d</span><span style=color:#f92672>,</span> 103<span style=color:#f92672>.</span><span style=color:#a6e22e>33333333373333d</span><span style=color:#f92672>,</span> 206<span style=color:#f92672>.</span><span style=color:#a6e22e>66666166666666d</span><span style=color:#f92672>,</span> 310<span style=color:#f92672>.</span><span style=color:#a6e22e>05d</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>                UnitTypes<span style=color:#f92672>.</span><span style=color:#a6e22e>Distance</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                        0<span style=color:#f92672>.</span><span style=color:#a6e22e>06d</span><span style=color:#f92672>,</span> 0<span style=color:#f92672>.</span><span style=color:#a6e22e>07d</span><span style=color:#f92672>,</span> 0<span style=color:#f92672>.</span><span style=color:#a6e22e>08d</span><span style=color:#f92672>,</span> 0<span style=color:#f92672>.</span><span style=color:#a6e22e>09d</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        49<span style=color:#f92672>.</span><span style=color:#a6e22e>066666666666664d</span><span style=color:#f92672>,</span> 49<span style=color:#f92672>.</span><span style=color:#a6e22e>266666666666664d</span><span style=color:#f92672>,</span> 49<span style=color:#f92672>.</span><span style=color:#a6e22e>566666666666664d</span><span style=color:#f92672>,</span> 49<span style=color:#f92672>.</span><span style=color:#a6e22e>766666666666664d</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        99<span style=color:#f92672>.</span><span style=color:#a6e22e>133333333333329d</span><span style=color:#f92672>,</span> 99<span style=color:#f92672>.</span><span style=color:#a6e22e>433333333333329d</span><span style=color:#f92672>,</span> 99<span style=color:#f92672>.</span><span style=color:#a6e22e>633333333333329d</span><span style=color:#f92672>,</span> 99<span style=color:#f92672>.</span><span style=color:#a6e22e>833333333333329d</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                        140<span style=color:#f92672>,</span> 141<span style=color:#f92672>,</span> 142<span style=color:#f92672>,</span> 143<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Object<span style=color:#f92672>[]</span> expectedValues <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>                        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                                <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                <span style=color:#e6db74>&#34;5867318f-3174-9f41-abca-22f56a75247e&#34;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                1<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                1<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                0x10<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                PlacedLayerType<span style=color:#f92672>.</span><span style=color:#a6e22e>Raster</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>                                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                                        0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2
</span></span><span style=display:flex><span>                                <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>                                0d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                0d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                0d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                0d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                0d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                2d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                2d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                4<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                4<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                1<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                0<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                600<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                0<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                600<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                1<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                2d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                2d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                72d<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                UnitTypes<span style=color:#f92672>.</span><span style=color:#a6e22e>Density</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                <span style=color:#f92672>-</span>1<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                <span style=color:#f92672>-</span>1<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                <span style=color:#f92672>-</span>1<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                <span style=color:#e6db74>&#34;64b3997c-06e0-be40-a349-41acf397c897&#34;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>                                <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>                                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                                        0<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> 2
</span></span><span style=display:flex><span>                                <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>                        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>String sourceFilePath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;rgb8_2x2_linked.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>String outputPath <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;rgb8_2x2_linked_output.psd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>PsdImage image <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>sourceFilePath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    SoLeResource soleResource <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> index <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Find SoLeResource
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Layer imageLayer <span style=color:#f92672>:</span> image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>LayerResource imageResource <span style=color:#f92672>:</span> imageLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getResources</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>imageResource <span style=color:#66d9ef>instanceof</span> SoLeResource<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                soleResource <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SoLeResource<span style=color:#f92672>)</span>imageResource<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                Object<span style=color:#f92672>[]</span> expectedValue <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>Object<span style=color:#f92672>[])</span>expectedValues<span style=color:#f92672>[</span>index<span style=color:#f92672>++];</span>
</span></span><span style=display:flex><span>                $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertAreEqual</span><span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>[</span>1<span style=color:#f92672>],</span> soleResource<span style=color:#f92672>.</span><span style=color:#a6e22e>getUniqueId</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>                $<span style=color:#f92672>.</span><span style=color:#a6e22e>checkSmartObjectResourceValues</span><span style=color:#f92672>(</span>expectedValue<span style=color:#f92672>,</span> soleResource<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>                $<span style=color:#f92672>.</span><span style=color:#a6e22e>setNewSmartValues</span><span style=color:#f92672>(</span>soleResource<span style=color:#f92672>,</span> newSmartValues<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertIsTrue</span><span style=color:#f92672>(</span>soleResource <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    soleResource <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span> <span style=color:#75715e>// clear the value to reuse the variable a bit later
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Save the changes to a PSD file for further verification
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>outputPath<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PsdOptions<span style=color:#f92672>(</span>image<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Load just saved PSD file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    PsdImage savedImage <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>PsdImage<span style=color:#f92672>)</span>Image<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>outputPath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Find SoLeResource
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Layer imageLayer <span style=color:#f92672>:</span> image<span style=color:#f92672>.</span><span style=color:#a6e22e>getLayers</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>LayerResource imageResource <span style=color:#f92672>:</span> imageLayer<span style=color:#f92672>.</span><span style=color:#a6e22e>getResources</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>imageResource <span style=color:#66d9ef>instanceof</span> SoLeResource<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                    soleResource <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>SoLeResource<span style=color:#f92672>)</span>imageResource<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                    <span style=color:#75715e>// Make sure that the resource was saved correctly
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    $<span style=color:#f92672>.</span><span style=color:#a6e22e>checkSmartObjectResourceValues</span><span style=color:#f92672>(</span>newSmartValues<span style=color:#f92672>,</span> soleResource<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        savedImage<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    $<span style=color:#f92672>.</span><span style=color:#a6e22e>assertIsTrue</span><span style=color:#f92672>(</span>soleResource <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>finally</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    image<span style=color:#f92672>.</span><span style=color:#a6e22e>dispose</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></p></div></div></div></div><hr></div></div></section></div></div></div></div></div></div><div id=dvHidden style=display:none></div><div id=footer></div><a class=backtop>&nbsp;</a><div id=DynabicMenuFooter></div><script type=text/javascript>const langarray=[]</script><script type=text/javascript>jQuery(document).ready(function(){let e=$(".nested").hide(),t=$(".treeview-animated-element");$(".treeview-animated-items-header").hover(function(){$(this).children.toggleClass("Mydiv")}),$(".treeview-animated-items-header").click(function(){return console.log("mala"),$this=$(this),console.log($this.attr("id")),$target=$this.siblings(".nested"),$pointerPlus=$this.children(".fa-plus"),$pointerMinus=$this.children(".fa-minus"),$pointerPlus.removeClass("fa-plus"),$pointerPlus.addClass("fa-minus"),$pointerMinus.removeClass("fa-minus"),$pointerMinus.addClass("fa-plus"),$this.toggleClass("open"),$target.hasClass("active")?$target.removeClass("active").slideUp():$target.addClass("active").slideDown(),!1})})</script><script>(function(e,s,o,a,t,n,i){e.ContainerizeMenuObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=s.createElement(o),i=s.getElementsByTagName(o)[0],n.async=1,n.src=a,i.parentNode.append(n)})(window,document,"script","https://menu.containerize.com/scripts/engine.min.js?v=1.0.1","aspose-en")</script><script src=https://releases-qa.aspose.com/res_repo/js/highlight.min.js></script>
<script src=https://releases-qa.aspose.com/res_repo/js/bootstrap.min.js></script>
<script src=/js/bundle.min.js></script>
<script src=/js/dynabic.treeview.js></script>
<script src=/js/treeviewmanager.js></script>
<script>hljs.highlightAll()</script><link rel=stylesheet type=text/css href=https://releases-qa.aspose.com/res_repo/css/hugocustom.css><script>$(".btn-showside .mb-5").on("click",function(){$("main .flex .dn.db-l").toggleClass("showsidebar"),$("main .flex .w-100").toggleClass("noscroll")}),$(".btn-showmenu").on("click",function(){$("nav.bg-primary-color-dark").toggleClass("showmenu")}),$(".btn-plain").on("click",function(){$("main .flex .dn.db-l").removeClass("showsidebar"),$("main .flex .dn.db-l").removeClass("showsidebar"),$("nav.bg-primary-color-dark").removeClass("showmenu")}),$(".ss-bar ul li a[data-target]").on("click",function(){$(this).find(".i.fa-angle-down").hasClass("fa-angle-up")?$(this).find("i.fa-angle-down").removeClass("fa-angle-up"):$(this).find("i.fa-angle-down").toggleClass("fa-angle-up")}),$(".btn-showside").on("click",function(){$(".ss-bar").toggleClass("showsidebar")}),$(".btn-plain").on("click",function(){$(".ss-bar").removeClass("showsidebar")})</script><script>$(document).ready(function(){$("div pre").removeAttr("style");var e,t=$(location).attr("hash");"#package-explorer"==t&&(e=document.querySelector('.nav-tabs a[href="#packageexplorer-tab"]'),e&&e.click()),$('a:has(img[alt="banner"]').click(function(){event.preventDefault();var e=document.querySelector('.nav-tabs a[href="#packageexplorer-tab"]');e&&e.click()}),$(window).scroll(function(){$(this).scrollTop()>150?$(".backtop").fadeIn():$(".backtop").fadeOut()}),$(".backtop").click(function(){return $("html, body").animate({scrollTop:0},600),!1}),$(".linkshow").on("click",function(){$(this).find("i").toggleClass("fa-minus-square"),$(".linkshowbox").toggleClass("hide")}),document.querySelector("body").addEventListener("click",function(t){if(t.target.classList.contains("searchButton")){$(".ss-bar").removeClass("showsidebar");try{var e=$("input[name=q]").val();gtag("config","UA-3109235-2",{page_path:"/search/?q="+e})}catch(e){}}if(t.target.classList.contains("fa-search")){$(".ss-bar").removeClass("showsidebar");try{e=$("input[name=q]").val(),gtag("config","UA-3109235-2",{page_path:"/search/?q="+e})}catch(e){}}},!0)})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>